import{d as J,k as K,q as P,E as a,Q,c as Z,h as o,w as R,g as n,G as $,F as H,r as i,o as O,i as s,t as r,n as X,x as v,Z as Y,S as ee,J as te,R as le,$ as oe,_ as ne}from"./index-DuawtOAE.js";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang-Wk_osBoj.js";import{g as se}from"./getCityByCode-DzjNnDGo.js";import{_ as ie}from"./index.vue_vue_type_script_setup_true_lang-ClFqetln.js";import"./areas-c4JLuV3N.js";const re={class:"ul"},ue={class:"btn-group"},de=J({__name:"wap",setup(me){const B=K(),g=P(()=>B.getSystemDict()||{}),c=a(),D=a(""),k=a(!0),U=a(),d=a(!1),f=l=>ee(l,"{y}-{m}-{d} {h}:{i}"),u=a([]),C=a([]),_=a("default"),z=()=>{c.value.onRefresh()},F=l=>(l.extend.columns="contact",_.value!=="default"&&(l.extend.search=_.value),l),I=a([{prop:"company",label:"客户名称"},{prop:"type",label:"合作类型",render:"picker",options:"cooperationType"},{prop:"area",label:"所属区域",render:"component",component:Q(ae)},{prop:"industry",label:"行业分类",render:"picker",options:"industryType"},{prop:"source",label:"来源",render:"picker",options:"source"}]),E=l=>{l==="add"&&(k.value=!0)},M=l=>{c.value.showForm(!0),te(()=>{U.value.getData({id:l.id}),k.value=!1})},x=a(),w=a(),y=a(),h=a(!1),T=l=>{h.value=l==="myShare",w.value.showPopup(),y.value=l},S=l=>{y.value=l,V({})},V=l=>{const e=u.value.join(",");let m=l?.id,b="customerMove";y.value==="myShare"&&(m=l==="0"?"0":l?.join(","),b="customerShare"),le(b,{ids:e,userId:m,type:y.value}).then(()=>{oe("操作成功"),c.value.onRefresh(),d.value=!1,u.value=[]})};return(l,e)=>{const m=i("van-tab"),b=i("van-tabs"),N=i("van-checkbox"),q=i("van-collapse-item"),p=i("van-button"),A=i("van-swipe-cell"),j=i("w-list"),L=i("van-checkbox-group"),W=i("van-collapse"),G=i("van-action-bar");return O(),Z(H,null,[o(b,{active:_.value,"onUpdate:active":e[1]||(e[1]=t=>_.value=t),onChange:z},{"nav-right":n(()=>[s("div",{class:"manage-btn",onClick:e[0]||(e[0]=t=>d.value=!d.value)},r(d.value?"完成":"管理"),1)]),default:n(()=>[o(m,{title:"我的客户",name:"default"}),o(m,{title:"下属客户",name:"child"}),o(m,{title:"共享客户",name:"shareWithMe"}),o(m,{title:"我共享的",name:"myShare"})]),_:1},8,["active"]),o(W,{modelValue:C.value,"onUpdate:modelValue":e[4]||(e[4]=t=>C.value=t)},{default:n(()=>[o(L,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value=t)},{default:n(()=>[o(j,{ref_key:"listRef",ref:c,api:{get:"customerList"},"search-form-data":I.value,"add-icon-visible":!0,"form-title":D.value,before:F,onNavBarEvent:E},{item:n(({data:t})=>[o(A,null,{right:n(()=>[o(p,{square:"",type:"primary",text:"详情",onClick:pe=>M(t)},null,8,["onClick"])]),default:n(()=>[o(q,{name:t.id},{title:n(()=>[R(o(N,{name:t.id,"icon-size":"16px",onClick:e[2]||(e[2]=Y(()=>{},["stop"]))},null,8,["name"]),[[$,d.value]]),v(" "+r(t.company),1)]),default:n(()=>[s("ul",re,[s("li",null,"合作类型："+r(g.value.cooperationType[t.type]),1),s("li",null,"所属区域："+r(X(se)(t.area)),1),s("li",null,"行业分类："+r(g.value.industryType[t.industry]),1),s("li",null,"来源："+r(g.value.source[t.source]),1),s("li",null,"最近联系："+r(f(t.lastTime)),1),s("li",null,"下次联系："+r(f(t.nextTime)),1),s("li",null,"创建时间："+r(f(t.creatTime)),1),s("li",null,"更新时间："+r(f(t.updateTime)),1)])]),_:2},1032,["name"])]),_:2},1024)]),_:1},8,["search-form-data","form-title"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),R(o(G,{placeholder:!0},{default:n(()=>[s("div",ue,[o(p,{size:"small",type:"primary",disabled:!u.value.length,onClick:e[5]||(e[5]=t=>T("toUser"))},{default:n(()=>[...e[11]||(e[11]=[v(" 移交 ",-1)])]),_:1},8,["disabled"]),o(p,{size:"small",type:"warning",disabled:!u.value.length,onClick:e[6]||(e[6]=t=>S("toCom"))},{default:n(()=>[...e[12]||(e[12]=[v(" 转入公海 ",-1)])]),_:1},8,["disabled"]),o(p,{size:"small",type:"success",disabled:!u.value.length,onClick:e[7]||(e[7]=t=>T("myShare"))},{default:n(()=>[...e[13]||(e[13]=[v(" 共享客户 ",-1)])]),_:1},8,["disabled"]),o(p,{size:"small",type:"danger",disabled:!u.value.length,onClick:e[8]||(e[8]=t=>S("toInvalid"))},{default:n(()=>[...e[14]||(e[14]=[v(" 设为无效客户 ",-1)])]),_:1},8,["disabled"])]),o(p,{size:"small",type:"danger",color:"linear-gradient(to right, #ff6034, #ee0a24)",onClick:e[9]||(e[9]=t=>d.value=!1)},{default:n(()=>[...e[15]||(e[15]=[v(" 取消 ",-1)])]),_:1})]),_:1},512),[[$,d.value]]),o(ie,{ref_key:"userDialogRef",ref:w,modelValue:x.value,"onUpdate:modelValue":e[10]||(e[10]=t=>x.value=t),"show-field":!1,data:{label:"用户"},multiple:h.value,onSelectClick:V},null,8,["modelValue","multiple"])],64)}}}),be=ne(de,[["__scopeId","data-v-b1092fa1"]]);export{be as default};
