import{f as v}from"./formData-hmO4wGXT.js";import{d as U,E as a,q as $,c as k,n,P as M,h as o,g as c,r as s,o as h,i as q,S as m,J as z,_ as G}from"./index-C2nSLI9N.js";import"./validate-B2z5ZXZx.js";import"./areas-c4JLuV3N.js";const J={key:0},L={key:1},O=U({__name:"index",setup(P){const b=a(),u=["nextTime","lastTime","address","tel","code","files"],r=a(!1),w=()=>{r.value=!1},p=e=>(e.creatTime&&(e.creatTime=m(e.creatTime)),e.updateTime&&(e.updateTime=m(e.updateTime)),e),d=a({}),x=a([{prop:"keywords",label:"查询关键词",search:{placeholder:"请输入客户名称，品牌名称，客户电话，社会信用代码关键字",style:{width:"500px"}},visible:!1},{label:"序号",type:"index",width:80},{prop:"company",label:"客户名称",search:!1},{prop:"userName",label:"所属人员",width:150,search:!1},{prop:"creatTime",label:"创建时间",width:180,render:"datetime",search:!1},{prop:"updateTime",label:"更新时间",width:180,render:"datetime",search:!1},{prop:"operation",label:"操作",render:"buttons",width:150,search:!1,buttons:[{key:"detail",label:"详情",click:e=>{r.value=!0,e.area&&(e.area=e.area.split(",")),d.value=p(e)}}]}]),i=a(),f=a(),_=a(),C=$(()=>v.filter(e=>!u.includes(e.prop)).map(e=>{const l=Object.assign({},e);return l.formItem&&delete l.formItem,l.attr&&delete l.attr,l.visible&&delete l.visible,l.render==="select"&&(l.render="picker"),l})),T=()=>{i.value.onRefresh()},y=e=>(e.keywords=f.value,e),V=e=>{i.value.showForm(!0),z(()=>{_.value.setValue(p(e))})},D=()=>{i.value.showForm(!1)};return(e,l)=>{const E=s("ak-list"),F=s("ak-form"),R=s("el-drawer"),g=s("van-search"),B=s("van-cell"),I=s("w-form"),N=s("w-list");return n(M)()?(h(),k("div",L,[o(g,{modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=t=>f.value=t),"show-action":"",placeholder:"请输入客户名称，品牌名称，客户电话，社会信用代码关键字"},{action:c(()=>[q("div",{onClick:T}," 搜索 ")]),_:1},8,["modelValue"]),o(N,{ref_key:"listRef",ref:i,api:{get:"customerCheck"},"list-props":{immediateCheck:!1},before:y,"form-title":"详情"},{item:c(({data:t})=>[o(B,{"is-link":"",class:"cell",title:t.company,value:t.userName,label:`创建:${n(m)(t.creatTime)} 更新:${n(m)(t.updateTime)}`,onClick:S=>V(t)},null,8,["title","value","label","onClick"])]),default:c(()=>[o(I,{ref_key:"formRef",ref:_,"confirm-text":!1,"cancel-text":"关闭",data:C.value,disabled:!0,onCancel:D},null,8,["data"])]),_:1},512)])):(h(),k("div",J,[o(E,{ref:"tableListEl",pk:"id","auto-load":!1,columns:x.value,"columns-icon-visible":!1,"search-icon-visible":!1,api:{list:"customerCheck"}},null,8,["columns"]),o(R,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=t=>r.value=t),size:"75%",title:"详情"},{default:c(()=>[o(F,{ref_key:"formDetailEl",ref:b,modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=t=>d.value=t),disabled:!0,"label-width":"100",class:"flex-form flex-form-2","btn-text":!1,data:n(v),"hide-filed":u,api:{detail:"customerDetail"},onCancel:w},null,8,["modelValue","data"])]),_:1},8,["modelValue"])]))}}}),Q=G(O,[["__scopeId","data-v-db87c3e0"]]);export{Q as default};
