import{_ as D}from"./upload.vue_vue_type_script_setup_true_lang-Cpmhnit_.js";import{d as E,k as S,E as t,e as d,o as m,r as p,g as f,h as N,f as P,J as U}from"./index-CkpV00AO.js";import{v as a}from"./validate-DSwcNQEl.js";const R=E({__name:"payFormWap",props:{isAdd:{type:Boolean,default:!0},currentUserId:{default:null}},emits:["clickEvent"],setup(c,{expose:v,emit:b}){const k=c,u=b,_=S(),l=t(),r=t(!1),i=t([]),o=t(),y=t([{prop:"code",label:"回款编号",rules:[a("required","回款编号不能为空")]},{prop:"contractId",label:"合同",render:"picker",rules:[a("required","请选择所属合同")],picker:{ajax:{api:"contractList",data:{userId:k.currentUserId}},columnsFieldNames:{text:"name",value:"id"}}},{prop:"money",label:"回款金额",rules:[a("required","回款金额不能为空"),a("money")]},{prop:"account",label:"回款账号",render:"picker",options:"accountType",rules:[a("required","请选择回款账号")]},{prop:"datetime",label:"回款时间",render:"datePicker",rules:[a("required","请输入回款时间")]},{label:"审核",prop:"status",render:"picker",options:[{value:1,label:"待审核"},{value:2,label:"通过"},{value:3,label:"拒绝"}],picker:{columnsFieldNames:{text:"label",value:"value"}}},{prop:"remark",label:"备注",field:{type:"textarea"}},{prop:"files",label:"附件",render:"scope"}]),x=()=>{u("clickEvent","cancel")},h=e=>(o.value&&(e.files=o.value),e),F=e=>{e==="submit"&&u("clickEvent","submit")},I=(e,s,n)=>{e==="customerId"&&(n.contactId="")},V=e=>{o.value=e};return v({getData:(e,s)=>{U(()=>{l.value.getData({id:e.id})}),i.value=s==="check"?[]:["status"],r.value=e.status===2&&e.userId===_.userInfo.id},setValue:e=>{console.log("obj",e),l.value.setValue(e)}}),(e,s)=>{const n=p("van-notice-bar"),g=p("w-form");return m(),d(g,{ref_key:"formRef",ref:l,disabled:r.value,data:y.value,"submit-url":c.isAdd?"contractPaymentSave":"contractPaymentEdit","request-url":"contractPaymentGet",before:h,after:F,"hide-filed":i.value,onCancel:x,onFieldValueChange:I},{formTop:f(()=>[r.value?(m(),d(n,{key:0,text:"审核通过，不能修改数据"})):P("",!0)]),files:f(({rows:C,value:q})=>[N(D,{item:C,"model-value":q,"onUpdate:modelValue":V},null,8,["item","model-value"])]),_:1},8,["disabled","data","submit-url","hide-filed"])}}});export{R as _};
