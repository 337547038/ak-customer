import{d as T,E as s,m as V,w as u,a as q,c as h,h as r,n as O,P as S,F as $,i as G,G as v,g as E,R as M,r as d,o as f,x as D,_ as I}from"./index-C2nSLI9N.js";import{r as J,_ as P,m as A}from"./childUser.vue_vue_type_script_setup_true_lang-ClE6Tlu-.js";import{a as H}from"./getCityByCode-DzjNnDGo.js";import"./areas-c4JLuV3N.js";const K={style:{position:"relative"}},L={class:"back-btn",style:{margin:"5px"}},Q={key:1,class:"back-btn"},U=T({__name:"area",setup(W){const _=s(!1),y=s(),i=s(!0),g=s(),x=s(),C=s([]),b=s(0),k=s([]),N=s({backgroundColor:"#FFFFFF",tooltip:{trigger:"item"},visualMap:{type:"continuous",show:!0,min:0,max:b,left:"left",top:"bottom",text:["高","低"],calculable:!0,inRange:{color:["#FFFFFF","#0099FF"]}},series:[{name:"用户数",type:"map",map:x,roam:!0,label:{normal:{show:!0},emphasis:{show:!1}},data:C}]}),F=()=>{i.value=!0,p("china",!0)},R=e=>{w(e)},p=(e,a)=>{const n=e||"china";x.value=n,M(`echarts/map/${n}.json`).then(()=>{}).catch(l=>{J(n,l),a?j(k.value):w()})},z=e=>({北京:"beijing",广东:"guangdong",湖南:"hunan",江苏:"jiangsu",浙江:"zhejiang",云南:"yunnan",西藏:"xizang",新疆:"xinjiang",四川:"sichuan",陕西:"shanxi1",山西:"shanxi",上海:"shanghai",山东:"shandong",青海:"qinghai",宁夏:"ningxia",内蒙古:"neimenggu",辽宁:"liaoning",吉林:"jilin",江西:"jiangxi",湖北:"hubei",河南:"henan",黑龙江:"heilongjiang",河北:"hebei",海南:"hainan",贵州:"guizhou",广西:"guangxi",甘肃:"gansu",福建:"fujian",重庆:"chongqing",天津:"tianjin",安徽:"anhui",台湾:"taiwan",香港:"xianggang",澳门:"aomen"})[e],B=e=>{if(e.componentType==="series"&&e.seriesType==="map"){const a=z(e.name);a&&(i.value=!1,g.value=e.data?.code,p(a,!0))}},j=e=>{i.value||(e=e.filter(t=>t.area?.split(",")?.[0]===g.value));const a=["11","12","31","50","81","82"].includes(g.value),n={};e.forEach(t=>{if(t.area){const o=t.area.split(",");if(o&&(o.length===3||o.length===2)){let m=i.value?o[0]:o[1];n[m]||(n[m]=0),n[m]++}}});const l=[];let c=0;if(Object.keys(n).length>0)for(const t in n){let o=H(t,i.value?"p":a?"a":"c");i.value&&(o=o?.replace("市","")),l.push({name:o?.replace("省",""),value:n[t],code:t}),n[t]>c&&(c=n[t])}C.value=l,b.value=c,y.value.setOption(N.value)},w=e=>{M("analysisCustomer",{userId:e}).then(a=>{k.value=a.data?.list,j(a.data?.list)})};return V(()=>{p()}),(e,a)=>{const n=d("van-loading"),l=d("van-button"),c=d("el-button"),t=q("loading");return u((f(),h("div",K,[r(P,{onChange:R}),O(S)()?(f(),h($,{key:0},[u(r(n,{type:"spinner"},null,512),[[v,_.value]]),G("div",L,[u(r(l,{type:"primary",plain:"",size:"small",onClick:F},{default:E(()=>[...a[0]||(a[0]=[D(" 返回中国地图 ",-1)])]),_:1},512),[[v,!i.value]])])],64)):(f(),h("div",Q,[u(r(c,{type:"primary",text:"",onClick:F},{default:E(()=>[...a[1]||(a[1]=[D(" 返回中国地图 ",-1)])]),_:1},512),[[v,!i.value]])])),r(A,{ref_key:"myEchartsRef",ref:y,onClick:B},null,512)])),[[t,_.value]])}}}),ae=I(U,[["__scopeId","data-v-776830c9"]]);export{ae as default};
