import{_ as b}from"./index.vue_vue_type_script_setup_true_lang-DyiyRsDp.js";import{d as y,v as a,k as _,q as k,G as w,l as v,M as g,c as C,h as i,F as x,r as I,o as R,j as L}from"./index-BqO2u9IT.js";import{_ as D}from"./paymentForm.vue_vue_type_script_setup_true_lang-DQg-5VD8.js";import"./validate-DWZH7t8y.js";const O=y({__name:"index",setup(F){const c=L(),r=a(),o=_(),s=a(),u=a(),d=k(()=>o.userInfo?.hasChild),p=a([{label:"下属人员",prop:"userId",visible:!1,search:{changeRefresh:!0,style:{width:"230px"},visible:d.value,render:"select",ajax:{api:"userChildList",data:{},label:"userName",value:"id"},clearable:!0,onChange:e=>{r.value=e,console.log(e)}}},{prop:"code",label:"回款编号"},{prop:"customerId",label:"客户名称",width:180,showOverflowTooltip:!0,formatter:e=>e.customerName,search:{render:"component",userId:r,component:w(b)}},{prop:"contractCode",label:"合同编号",search:!1},{prop:"contractName",label:"合同名称",search:!1},{prop:"money",label:"回款金额",search:!1,width:100},{prop:"datetime",label:"回款时间",render:"datetime",width:120,showOverflowTooltip:!0,search:!1},{prop:"account",label:"回款账户",render:"tag",replaceValue:"accountType",search:!1,width:100},{prop:"status",label:"审核状态",render:"tag",replaceValue:{1:"待审核",2:"通过",3:"拒绝"},custom:{1:"primary",2:"success",3:"danger"},search:{render:"select",options:{1:"待审核",2:"通过",3:"拒绝"}},width:100},{prop:"creatDate",label:"创建时间",render:"datetime",width:120,showOverflowTooltip:!0,search:!1},{prop:"operate",label:"操作",width:200,render:"buttons",buttons:[{label:"审核",attr:{type:"danger",text:!0},display:e=>o.userInfo?.hasChild&&e.userId!==o.userInfo?.id&&e.status===1,click:e=>{l(!0,e,!0)}},{key:"edit",label:"详情",attr:{text:!0},click:e=>{l(!0,e)}},{key:"del",label:"删除",attr:{text:!0}}],search:!1}]),l=(e,t,n)=>{u.value.open(e,t,n)},m=()=>{s.value.getData()},f=(e,t)=>(e==="get"&&c.query.search==="todo"&&(t.extend.search="child"),t),h=v(()=>c.query,()=>{s.value.getData()});return g(()=>{h()}),(e,t)=>{const n=I("ak-list");return R(),C(x,null,[i(n,{ref_key:"tableListRef",ref:s,columns:p.value,pk:"id",before:f,api:{list:"contractPaymentList",del:"contractPaymentDel"},"control-btn":[{key:"add",click:()=>{l(!1)}}]},null,8,["columns","control-btn"]),i(D,{ref_key:"paymentFormRef",ref:u,"user-id":r.value,onCallback:m},null,8,["user-id"])],64)}}});export{O as default};
