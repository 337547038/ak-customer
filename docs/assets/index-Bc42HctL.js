import{d as w,k as I,l as c,n as C,c as q,i as a,h as r,g as i,D as _,r as n,o as N,v as R,u as B,j as S,H as L,z as D,G,_ as M,P as f}from"./index-Zml7XV3Z.js";const P={class:"container"},T={class:"form"},U=["src"],j={class:"weixin",style:{padding:"10px 0"}},g=w({__name:"index",setup(z){const v=B(),m=S(),x=I(),b=(t,e)=>{e?(L("resources",!0),x.setLoginInfo(t,!0),h(t.roleId).then(()=>{const o=m.query.redirect?m.query.redirect:"/";D(()=>{v.push({path:o})})})):l()},h=t=>new Promise(e=>{if(!t)return e();_("roleGetByIds",{id:t}).then(o=>{const u=o.data;G("resources",u,0),e()})}),s=c({userName:"admin",password:"12345"}),y=c([{prop:"userName",label:"用户名",formItem:{rules:[{required:!0,message:"请输入用户名",trigger:"blur"}]},attr:{}},{prop:"password",label:"密码",formItem:{rules:[{required:!0,message:"请输入密码",trigger:"blur"}]},attr:{type:"password"}}]),p=c(),l=()=>{_("getCaptcha",{}).then(t=>{const{base64:e,codeId:o}=t.data;p.value="data:image/png;base64,"+e,s.value.codeId=o}).catch(()=>{})};return C(()=>{l()}),(t,e)=>{const o=n("el-input"),u=n("el-form-item"),V=n("ak-form"),k=n("el-button");return N(),q("div",P,[a("div",T,[e[3]||(e[3]=a("h3",null,"xx客户管理系统",-1)),r(V,{"label-width":"100",data:y.value,api:{add:"userLogin"},after:b,modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=d=>s.value=d)},{default:i(()=>[r(u,{label:"验证码",class:"item-code"},{default:i(()=>[r(o,{modelValue:s.value.code,"onUpdate:modelValue":e[0]||(e[0]=d=>s.value.code=d),placeholder:"输入验证码"},null,8,["modelValue"]),a("img",{src:p.value,class:"img",alt:"",onClick:l},null,8,U)]),_:1})]),_:1},8,["data","modelValue"]),a("div",j,[r(k,{type:"primary",text:""},{default:i(()=>e[2]||(e[2]=[R("微信扫码登录")])),_:1,__:[2]})])])])}}});typeof f=="function"&&f(g);const E=M(g,[["__scopeId","data-v-cea153a2"]]);export{E as default};
