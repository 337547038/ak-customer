import{m as E}from"./menuList-vXFEIJd8.js";import{d as L,l as t,c as B,h as a,g as d,F as D,r as o,o as w,q as S,z as T}from"./index-Br-qEitB.js";const R=L({__name:"role",setup(q){const s=t(),u=t(),f=t([{prop:"name",label:"角色名称"},{prop:"status",label:"状态",render:"tag",replaceValue:"status",custom:{1:"success",0:"danger"},search:{render:"select",options:"status"}},{label:"操作",render:"buttons",width:150,buttons:[{key:"edit",label:"编辑",attr:{text:!0},click:e=>{i(e)}},{label:"删除",key:"del",attr:{text:!0},popConfirm:{confirmButtonType:"danger"}}]}]),i=e=>{r.value=!0,m.value=e.name?`编辑${e.name}角色`:"新增角色",n.value=e||{},T(()=>{s.value.setCheckedKeys(e.content?.split(",")||[])})},k=t(),n=t({}),r=t(!1),m=t("新增角色"),p=()=>{r.value=!1},_=(e,l)=>e,b=()=>{p(),u.value.getData()},v=()=>{const e=s.value.getCheckedKeys(!1);n.value.content=e.join(",")},g=t([{prop:"name",label:"角色名称",formItem:{rules:[{required:!0,message:"请输入角色名称",trigger:"blur"}]}},{label:"状态",prop:"status",render:"radio",options:"status",attr:{modelValue:1}},{label:"权限菜单",prop:"idList",render:"scope"},{label:"备注",prop:"remark",attr:{type:"textarea",rows:4}}]);return(e,l)=>{const h=o("ak-list"),y=o("el-tree"),C=o("el-form-item"),x=o("ak-form"),V=o("el-dialog");return w(),B(D,null,[a(h,{ref_key:"tableListEl",ref:u,pk:"id",columns:f.value,api:{list:"roleList",del:"roleDelete"},controlBtn:[{key:"add",click:()=>{i({})}},{key:"del"}]},null,8,["columns","controlBtn"]),a(V,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=c=>r.value=c),width:"500",title:m.value,class:"form-dialog"},{default:d(()=>[a(x,{"label-width":"100px",pk:"id",ref_key:"formEl",ref:k,onCancel:p,before:_,after:b,data:g.value,api:{add:"roleSave",edit:"roleEdit",detail:"roleGet"},modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=c=>n.value=c)},{idList:d(()=>[a(C,{label:"角色权限"},{default:d(()=>[a(y,{ref_key:"treeRef",ref:s,"node-key":"path",props:{label:"title",value:"path"},data:S(E),"show-checkbox":"",onCheckChange:v},null,8,["data"])]),_:1})]),_:1},8,["data","modelValue"])]),_:1},8,["modelValue","title"])],64)}}});export{R as default};
