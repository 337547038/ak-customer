import{_ as T}from"./index.vue_vue_type_script_setup_true_lang-ClFqetln.js";import{d as I,E as a,Q as L,e as p,g as o,r as l,o as c,h as r,f as v,i as z,c as A,t as k,V as J,x as Q,J as C}from"./index-DuawtOAE.js";const G={key:0},O=I({__name:"wap",setup(H){const n=a(),i=a(),h=e=>(!e.tid&&!e.name&&(e.tid=0),e),b=e=>{n.value.setTreeData(e)},w=a([{prop:"name",label:"部门名称"},{prop:"status",label:"状态",render:"switch",modelValue:1}]),s=a(!0),u=a(0),y=a([{prop:"tidName",label:"上级部门",field:{disabled:!0},modelValue:"顶级"},{prop:"name",label:"部门名称",rules:[{required:!0,message:"请填写部门名称"}]},{prop:"userId",label:"负责人",render:"component",component:L(T)},{prop:"status",label:"状态",render:"switch",modelValue:1}]),g=e=>(e.tid=u.value,delete e.tidName,e),N=()=>{_(!1),n.value.onRefresh()},_=e=>{n.value.showForm(e)},B=e=>{e==="add"&&(s.value=!0)},V=e=>{n.value.showForm(!0),C(()=>{i.value.setValue({tidName:e.name}),u.value=e.id,s.value=!0})},x=e=>{n.value.showForm(!0),C(()=>{i.value.setValue({...e,tidName:e.name}),u.value=e.tid,s.value=!1})},R=e=>{n.value.deleteById(e)};return(e,f)=>{const D=l("van-tag"),E=l("van-icon"),F=l("van-cell"),d=l("van-button"),S=l("van-swipe-cell"),$=l("w-form"),q=l("w-list");return c(),p(q,{ref_key:"listRef",ref:n,api:{get:"deptList",del:"deptDel"},before:h,"add-icon-visible":!0,"search-form-data":w.value,"form-title":s.value?"新增部门":"编辑部门",onNavBarEvent:B},{item:o(({data:t})=>[r(S,null,{right:o(()=>[r(d,{square:"",type:"primary",icon:"add-o",onClick:m=>V(t)},null,8,["onClick"]),r(d,{square:"",icon:"records-o",onClick:m=>x(t)},null,8,["onClick"]),r(d,{square:"",icon:"delete-o",type:"danger",onClick:m=>R(t.id)},null,8,["onClick"])]),default:o(()=>[r(F,{clickable:!!t.hasChildren},{title:o(()=>[z("span",{style:J({paddingLeft:t.level*15+"px"})},k(t.name),5),t.userName?(c(),A("span",G," ("+k(t.userName)+")",1)):v("",!0),t.status===0?(c(),p(D,{key:1,type:"danger"},{default:o(()=>[...f[0]||(f[0]=[Q(" 禁用 ",-1)])]),_:1})):v("",!0)]),"right-icon":o(()=>[t.hasChildren?(c(),p(E,{key:0,name:"arrow",onClick:m=>b(t)},null,8,["onClick"])):v("",!0)]),_:2},1032,["clickable"])]),_:2},1024)]),default:o(()=>[r($,{ref_key:"formRef",ref:i,data:y.value,"submit-url":s.value?"deptSave":"deptEdit",before:g,after:N,onCancel:_},null,8,["data","submit-url"])]),_:1},8,["search-form-data","form-title"])}}});export{O as _};
