import{d as S,r,a as O,c as x,o as a,b as z,F as L,e as i,w as q,f as C,g as t,h as e,i as m,t as I,p as F,u as M,j as K,k as R,l as G,m as E,n as b,q as T,s as Q,v as X,x as $,y as Y,z as Z,A as ee,B as te,C as ne,D as oe,E as B,G as ae,K as se,H,I as le,J as re,L as U,M as ue,_ as J,N as ce,O as j,P as ie}from"./index-CkpV00AO.js";import{m as A}from"./menuList-DHf8S1Eg.js";const _e=""+new URL("logo-CPmPqqKk.png",import.meta.url).href,de=S({__name:"menuItem",props:{data:{default:()=>[]}},setup(g){const h=u=>{for(const s in u)if(F(u[s].path))return!0;return!1};return(u,s)=>{const k=r("ak-icon"),n=r("menu-item",!0),d=r("el-sub-menu"),f=r("el-menu-item"),_=O("permission");return a(!0),x(L,null,z(g.data,(l,c)=>(a(),x(L,{key:c},[l.children&&h(l.children)?(a(),i(d,{key:0,index:l.path||l.menuIndex},{title:t(()=>[e(k,{name:l.icon},null,8,["name"]),m("span",null,I(l.title),1)]),default:t(()=>[e(n,{data:l.children},null,8,["data"])]),_:2},1032,["index"])):l.type!=="btn"?q((a(),i(f,{key:1,index:l.path||l.menuIndex},{default:t(()=>[e(k,{name:l.icon},null,8,["name"]),m("span",null,I(l.title),1)]),_:2},1032,["index"])),[[_,l.path]]):C("",!0)],64))),128)}}}),pe=S({__name:"menu",props:{collapse:{type:Boolean}},setup(g){const h=M(),u=K(),s=R(),k=n=>{h.push({path:n})};return G(()=>u.path,()=>{A.forEach(n=>{if(n.path===u.path)s.changeBreadcrumb([{label:n.title}]);else if(n.children)for(const d in n.children){const f=n.children[d];if(f.path===u.path){s.changeBreadcrumb([{label:f.title}]);break}}})}),E(()=>{}),(n,d)=>{const f=r("el-menu");return a(),i(f,{"unique-opened":!0,collapse:g.collapse,"active-text-color":"#ffd04b","background-color":"rgb(48 65 86)","text-color":"#fff","default-openeds":["customer"],onSelect:k},{default:t(()=>[e(de,{data:b(A)},null,8,["data"])]),_:1},8,["collapse"])}}}),me={class:"comm-header-tool"},fe={class:"header-right"},ve={class:"header-avatar",style:{cursor:"pointer"}},ke={class:"name"},be=S({__name:"header",props:{collapse:{type:Boolean}},emits:["click"],setup(g,{emit:h}){const u=M(),s=R(),k=T(()=>s?.breadcrumb),n=h,d=T(()=>s.userInfo),f=c=>{n("click",c)},_=()=>{s.logout(u)},l=()=>{u.push({path:"/system/userCenter"})};return(c,o)=>{const p=r("el-icon"),w=r("el-breadcrumb-item"),y=r("el-breadcrumb"),V=r("el-avatar"),v=r("el-menu-item"),N=r("el-menu"),P=r("el-dropdown");return a(),x(L,null,[e(p,{class:"collapse-icon",onClick:o[0]||(o[0]=D=>f("collapse"))},{default:t(()=>[g.collapse?(a(),i(b(X),{key:1})):(a(),i(b(Q),{key:0}))]),_:1}),e(y,{separator:"/",class:"breadcrumb"},{default:t(()=>[e(w,{to:{path:"/"}},{default:t(()=>[...o[3]||(o[3]=[$(" 首页 ",-1)])]),_:1}),(a(!0),x(L,null,z(k.value,(D,W)=>(a(),i(w,{key:W,to:{path:D.path}},{default:t(()=>[$(I(D.label),1)]),_:2},1032,["to"]))),128))]),_:1}),m("div",me,[e(p,{title:"刷新页面",onClick:o[1]||(o[1]=D=>f("refresh"))},{default:t(()=>[e(b(Y))]),_:1}),e(p,{title:"全屏"},{default:t(()=>[e(b(Z),{onClick:o[2]||(o[2]=D=>f("fullScreen"))})]),_:1})]),m("div",fe,[e(P,null,{dropdown:t(()=>[e(N,{class:"avatar-menu"},{default:t(()=>[e(v,{index:"user",onClick:l},{default:t(()=>[e(p,null,{default:t(()=>[e(b(te))]),_:1}),o[4]||(o[4]=m("span",{class:"title"},"个人中心",-1))]),_:1}),e(v,{index:"setting",onClick:l},{default:t(()=>[e(p,null,{default:t(()=>[e(b(ne))]),_:1}),o[5]||(o[5]=m("span",{class:"title"},"设置",-1))]),_:1}),e(v,{index:"logout",onClick:_},{default:t(()=>[e(p,null,{default:t(()=>[e(b(oe))]),_:1}),o[6]||(o[6]=m("span",{class:"title"},"退出登录",-1))]),_:1})]),_:1})]),default:t(()=>[m("div",ve,[e(V,{class:"avatar",size:"small",shape:"circle",src:d.value.avatar},null,8,["src"]),m("span",ke,I(d.value.userName),1),e(p,{class:"el-icon--right"},{default:t(()=>[e(b(ee))]),_:1})])]),_:1})])],64)}}}),he={class:"logo"},ye=S({__name:"index",setup(g){const h=R(),u=B(!1),s=B(!1),k=B(!0),n=B([]),d=c=>{c==="collapse"&&(u.value=!u.value),c==="fullScreen"&&(s.value=!s.value),c==="refresh"&&(k.value=!1,re(()=>{k.value=!0}))},f=c=>{n.value=c},_=T(()=>{const c=h?.tabs;if(c){const o=[];return c.forEach(p=>{o.push(p.name)}),o}return[]}),l=()=>{h.updateSystemDict(!1)};return E(()=>{l()}),(c,o)=>{const p=r("el-aside"),w=r("el-header"),y=r("router-view"),V=r("el-main"),v=r("el-container"),N=r("el-icon");return a(),i(v,{class:"common-layout"},{default:t(()=>[s.value?C("",!0):(a(),i(p,{key:0,width:u.value?"64px":"220px",class:"common-sidebar"},{default:t(()=>[m("div",he,[o[1]||(o[1]=m("img",{src:_e},null,-1)),q(m("span",null,"客户管理系统",512),[[ae,!u.value]])]),e(pe,{collapse:u.value,onGetMenuList:f},null,8,["collapse"])]),_:1},8,["width"])),e(v,{class:"common-container"},{default:t(()=>[s.value?C("",!0):(a(),i(w,{key:0,class:"common-header"},{default:t(()=>[e(be,{collapse:u.value,onClick:d},null,8,["collapse"])]),_:1})),e(V,{class:"common-main"},{default:t(()=>[k.value?(a(),i(y,{key:0},{default:t(({Component:P})=>[(a(),i(se,{include:_.value},[(a(),i(H(P)))],1032,["include"]))]),_:1})):C("",!0)]),_:1})]),_:1}),s.value?(a(),i(N,{key:1,class:"quit-full",title:"退出全屏",onClick:o[0]||(o[0]=P=>d("fullScreen"))},{default:t(()=>[e(b(le))]),_:1})):C("",!0)]),_:1})}}}),ge={class:"nav-list"},xe={key:0,class:"nav-list-item"},Ce={style:{display:"flex","justify-content":"center","padding-top":"30px"}},we=S({__name:"navPopup",props:{menuList:{}},setup(g,{expose:h}){const u=M(),s=B(!1),k=()=>{s.value=!0},n=_=>{for(const l in _)if(F(_[l].path))return!0;return!1},d=_=>{u.push({path:_}),f()},f=()=>{s.value=!1};return h({open:k}),(_,l)=>{const c=r("van-cell"),o=r("van-button"),p=r("van-popup"),w=O("permission");return a(),i(p,{show:s.value,"onUpdate:show":l[0]||(l[0]=y=>s.value=y),position:"right",style:{width:"88%",height:"100%"}},{default:t(()=>[m("div",ge,[(a(!0),x(L,null,z(g.menuList,(y,V)=>(a(),x("div",{key:V,class:"nav-group"},[y.children&&n(y.children)?(a(),x("div",xe,[m("h3",null,[m("i",{class:U(y.icon)},null,2),$(" "+I(y.title),1)]),(a(!0),x(L,null,z(y.children,v=>(a(),x(L,{key:v.path},[v.type!=="btn"?q((a(),i(c,{key:0,onClick:N=>d(v.path)},{title:t(()=>[m("i",{class:U(v.icon),style:{"margin-right":"2px"}},null,2),m("span",null,I(v.title),1)]),_:2},1032,["onClick"])),[[w,v.path]]):C("",!0)],64))),128))])):C("",!0)]))),128))]),m("div",Ce,[e(o,{size:"small",onClick:f},{default:t(()=>[...l[1]||(l[1]=[$(" 关闭 ",-1)])]),_:1})])]),_:1},8,["show"])}}}),$e=S({__name:"tabbar",props:{modelValue:{default:0},modelModifiers:{}},emits:["update:modelValue"],setup(g){const h=M(),u=ue(g,"modelValue"),s=k=>{let n="";switch(k){case 0:n="/";break;case 1:n="/customer/list";break;case 2:n="/contract/contract";break;case 3:n="/system/userCenter";break}h.push({path:n})};return(k,n)=>{const d=r("van-tabbar-item"),f=r("van-tabbar");return a(),i(f,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=_=>u.value=_),placeholder:!0,onChange:s},{default:t(()=>[e(d,{icon:"home"},{default:t(()=>[...n[1]||(n[1]=[$(" 首页 ",-1)])]),_:1}),e(d,{icon:"customer"},{default:t(()=>[...n[2]||(n[2]=[$(" 客户管理 ",-1)])]),_:1}),e(d,{icon:"contract"},{default:t(()=>[...n[3]||(n[3]=[$(" 合同管理 ",-1)])]),_:1}),e(d,{icon:"user"},{default:t(()=>[...n[4]||(n[4]=[$(" 我的 ",-1)])]),_:1})]),_:1},8,["modelValue"])}}}),Le=J($e,[["__scopeId","data-v-2f7c313f"]]),Se={class:"layout-container"},Ve={class:"icon-group"},Be=S({__name:"index",setup(g){const h=K(),u=M(),s=R(),k=()=>{j.emit("nav-bar-left-arrow-event",{}),u.go(-1)},n=c=>{j.emit(`nav-bar-right-${c}-event`,{})},d=B(),f=()=>{d.value.open()},_=B();G(()=>h.path,c=>{_.value=-1,c==="/"&&(_.value=0),c.indexOf("/customer")===0&&(_.value=1),c.indexOf("/contract")===0&&(_.value=2),c.indexOf("/system")===0&&(_.value=3),A.forEach(o=>{if(o.children?.length){for(const p of o.children)if(p.path===c){s.setNavBarTitle(p.title);break}}})},{immediate:!0});const l=()=>{s.updateSystemDict(!1)};return E(()=>{l(),document.body.classList.add("w-body")}),ce(()=>{document.body.classList.remove("w-body")}),(c,o)=>{const p=r("van-icon"),w=r("van-nav-bar"),y=r("router-view"),V=r("van-back-top");return a(),x(L,null,[m("div",Se,[e(w,{fixed:"",placeholder:"","safe-area-inset-top":"",title:b(s).navBarTitle,"left-arrow":b(s).leftArrow,onClickLeft:k},{right:t(()=>[m("div",Ve,[b(s).rightSearchArrow?(a(),i(p,{key:0,name:"search",size:"26",onClick:o[0]||(o[0]=v=>n("search"))})):C("",!0),b(s).rightAddArrow?(a(),i(p,{key:1,name:"add-o",size:"26",onClick:o[1]||(o[1]=v=>n("add"))})):C("",!0),e(p,{name:"wap-nav",size:"28",onClick:f})])]),_:1},8,["title","left-arrow"]),e(y,null,{default:t(({Component:v})=>[(a(),i(H(v)))]),_:1}),e(we,{ref_key:"navPopupRef",ref:d,"menu-list":b(A)},null,8,["menu-list"]),e(Le,{modelValue:_.value,"onUpdate:modelValue":o[2]||(o[2]=v=>_.value=v)},null,8,["modelValue"])]),b(s).backTop?(a(),i(V,{key:0})):C("",!0)],64)}}}),Ie=J(Be,[["__scopeId","data-v-85c36c7e"]]),Ne=S({__name:"enter",setup(g){return(h,u)=>b(ie)()?(a(),i(Ie,{key:1})):(a(),i(ye,{key:0}))}});export{Ne as default};
