import{d as M,a1 as g,M as U,E as r,l as _,a2 as b,e as m,n as A,P as p,g as B,a3 as J,r as f,o as v,h as L}from"./index-DuawtOAE.js";import{C,A as V,P as j}from"./areas-c4JLuV3N.js";const E=M({__name:"index",props:g({data:{default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(d){const s=U(d,"modelValue"),u=r(j),k=(o,e)=>{if(o===1)return C.filter(l=>l.provinceCode===e);if(o===2)return V.filter(l=>l.cityCode===e).map(l=>({...l,leaf:o>=2}))},h={label:"name",value:"code",lazy:!0,lazyLoad(o,e){let{level:l,value:n}=o;["11","12","31","50"].includes(n)&&(l=l+1,n=n+"01"),["81","82"].includes(n)&&(l=l+1),e(k(l,n))}},i=r(),t=r(!1),w=()=>{},c=r(""),y=({selectedOptions:o})=>{t.value=!1,i.value=o.map(e=>e.name).join("/"),s.value=o.map(e=>e.code).join(",")},P=({value:o,selectedOptions:e})=>{const l=e.slice(-1)[0];let n=l.level;["11","12","31","50"].includes(o)&&(o=o+"01",n=1),["81","82"].includes(o)&&(n=1),n?n===1&&(l.children=V.filter(a=>a.cityCode===o).map(a=>(a.level=2,a))):l.children=C.filter(a=>a.provinceCode===o).map(a=>(a.level=1,a))},x=_(()=>s.value,()=>{s.value&&p()},{immediate:!0});return b(()=>{x()}),(o,e)=>{const l=f("el-cascader"),n=f("van-cascader");return A(p)()?(v(),m(J,{key:1,modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value=a),"show-picker":t.value,"onUpdate:showPicker":e[4]||(e[4]=a=>t.value=a),item:d.data,onClearClick:w},{default:B(()=>[L(n,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=a=>c.value=a),title:"请选择所在地区","field-names":{text:"name",value:"code",children:"children"},options:u.value,onClose:e[2]||(e[2]=a=>t.value=!1),onFinish:y,onChange:P},null,8,["modelValue","options"])]),_:1},8,["modelValue","show-picker","item"])):(v(),m(l,{key:0,modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),props:h,options:u.value,placeholder:"请选择区域"},null,8,["modelValue","options"]))}}});export{E as _};
