import{_ as k}from"./index.vue_vue_type_script_setup_true_lang-0Xy7JTGt.js";import{d as y,E as a,k as _,q as w,Q as v,l as g,a4 as x,c as C,e as I,n as R,P as L,h as i,r as B,o as d,j as D}from"./index-CkpV00AO.js";import{_ as N}from"./paymentForm.vue_vue_type_script_setup_true_lang-C4EKL0LX.js";import T from"./wap-Dmz021la.js";import"./validate-DSwcNQEl.js";import"./payFormWap.vue_vue_type_script_setup_true_lang-D4312fy5.js";import"./upload.vue_vue_type_script_setup_true_lang-Cpmhnit_.js";const q={key:0},W=y({__name:"index",setup(E){const n=D(),r=a(),o=_(),s=a(),u=a(),p=w(()=>o.userInfo?.hasChild),m=a([{label:"下属人员",prop:"userId",visible:!1,search:{changeRefresh:!0,style:{width:"230px"},visible:p.value,render:"select",ajax:{api:"userChildList",data:{},label:"userName",value:"id"},clearable:!0,onChange:e=>{r.value=e,console.log(e)}}},{prop:"code",label:"回款编号"},{prop:"customerId",label:"客户名称",width:180,showOverflowTooltip:!0,formatter:e=>e.customerName,search:{render:"component",userId:r,component:v(k)}},{prop:"contractCode",label:"合同编号",search:!1},{prop:"contractName",label:"合同名称",search:!1},{prop:"money",label:"回款金额",search:!1,width:100},{prop:"datetime",label:"回款时间",render:"datetime",width:120,showOverflowTooltip:!0,search:!1},{prop:"account",label:"回款账户",render:"tag",replaceValue:"accountType",search:!1,width:100},{prop:"status",label:"审核状态",render:"tag",replaceValue:{1:"待审核",2:"通过",3:"拒绝"},custom:{1:"primary",2:"success",3:"danger"},search:{render:"select",options:{1:"待审核",2:"通过",3:"拒绝"}},width:100},{prop:"creatDate",label:"创建时间",render:"datetime",width:120,showOverflowTooltip:!0,search:!1},{prop:"operate",label:"操作",width:200,render:"buttons",buttons:[{label:"审核",attr:{type:"danger",text:!0},display:e=>o.userInfo?.hasChild&&e.userId!==o.userInfo?.id&&e.status===1,click:e=>{l(!0,e,!0)}},{key:"edit",label:"详情",attr:{text:!0},click:e=>{l(!0,e)}},{key:"del",label:"删除",attr:{text:!0}}],search:!1}]),l=(e,t,c)=>{u.value.open(e,t,c)},f=()=>{s.value.getData()},h=(e,t)=>(e==="get"&&n.query.search==="todo"&&(t.extend.search="child"),t),b=g(()=>n.query,()=>{s.value.getData()});return x(()=>{b()}),(e,t)=>{const c=B("ak-list");return R(L)()?(d(),I(T,{key:1})):(d(),C("div",q,[i(c,{ref_key:"tableListRef",ref:s,columns:m.value,pk:"id",before:h,api:{list:"contractPaymentList",del:"contractPaymentDel"},"control-btn":[{key:"add",click:()=>{l(!1)}}]},null,8,["columns","control-btn"]),i(N,{ref_key:"paymentFormRef",ref:u,"user-id":r.value,onCallback:f},null,8,["user-id"])]))}}});export{W as default};
