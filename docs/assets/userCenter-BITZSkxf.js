import{v as m}from"./validate-DWZH7t8y.js";import{d as q,k as C,v as a,m as h,c as R,i as S,h as r,g as n,F as V,j as W,r as p,B as w,E as B,o as D,s as E,t as T,_ as I,O as f}from"./index-D65I1yai.js";import{W as L}from"./index-Do97sbjq.js";const M={class:"user-center"},b=q({__name:"userCenter",setup(X){const d=W(),i=C().getSystemDict(),s=a(),o=a({}),_=a([{prop:"userName",label:"用户名称",render:"text"},{prop:"statusName",label:"状态",render:"text"},{prop:"sexName",label:"性别",render:"text"},{prop:"tidName",label:"直属上级",render:"text"},{prop:"departmentName",label:"所属部门",render:"text"},{prop:"creatTime",label:"创建时间",render:"text"},{prop:"updateTime",label:"更新时间",render:"text"},{prop:"lastLogin",label:"最后登录时间",render:"text"},{prop:"loginTimer",label:"登录次数",render:"text"},{prop:"ip",label:"最后登录ip",render:"text"},{prop:"password",label:"登录密码",attr:{type:"password",placeholder:"不修改请留空"}},{prop:"phone",label:"手机号码",formItem:{rules:[m("mobile"),m("required","请输入手机号码")]}},{prop:"weixin",label:"微信号码"},{prop:"qq",label:"qq号码"}]),x=(e,t,l)=>(l==="detail"&&(e.statusName=i?.status[e.status],e.sexName=i?.sex[e.sex]),e),u=a(),c=e=>{w("bindWx",e).then(()=>{B.success("绑定成功"),s.value.getData()})},v=()=>{o.value.bindWX?c({unbind:!0}):u.value.open()},g=()=>{const e=d.query.code,t=d.query.state;e&&t&&c({code:e})};return h(()=>{s.value.getData(),g()}),(e,t)=>{const l=p("el-button"),y=p("el-form-item"),k=p("ak-form");return D(),R(V,null,[S("div",M,[r(k,{ref_key:"formRef",ref:s,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=N=>o.value=N),class:"flex-form flex-form-2",pk:"id","label-width":"120",data:_.value,"label-suffix":"：",after:x,api:{edit:"userEdit",detail:"userInfo"}},{default:n(()=>[r(y,{label:"绑定微信"},{default:n(()=>[r(l,{type:"primary",onClick:v},{default:n(()=>[E(T(o.value.bindWX?"解绑":"点击绑定"),1)]),_:1})]),_:1})]),_:1},8,["modelValue","data"])]),r(L,{ref_key:"scanCodeRef",ref:u,mode:"dialog"},null,512)],64)}}});typeof f=="function"&&f(b);const z=I(b,[["__scopeId","data-v-961cf55b"]]);export{z as default};
