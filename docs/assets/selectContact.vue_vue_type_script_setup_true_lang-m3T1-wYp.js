import{d as V,m as k,l as c,M as B,e as v,o as r,g as C,c as x,b as L,r as p,F as w,D as F,z as I}from"./index-CJ8aW7xe.js";const R=V({__name:"selectContact",props:{modelValue:{},customerId:{}},emits:["update:modelValue","blur"],setup(f,{emit:_}){const m=f,d=_,g=k(()=>m.modelValue,e=>{t.value=e,e&&l.value.length===0&&i("",e)}),l=c([]),t=c(""),n=c(!1),i=(e,a)=>{if(e||a){n.value=!0;let s={name:e.replace("%",""),tid:m.customerId};a&&(s={id:a}),F("contactList",s).then(u=>{l.value=u.data.list||[],n.value=!1}).catch(()=>{l.value=[],n.value=!1})}else l.value=[]},h=e=>{d("update:modelValue",t.value)},b=()=>{I(()=>{if(t.value&&l.value.length>0){const e=l.value.find(a=>a.id===t.value);d("blur",t.value,e.name)}})};return B(()=>{g()}),(e,a)=>{const s=p("el-option"),u=p("el-select");return r(),v(u,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value=o),filterable:"",remote:"","remote-method":i,loading:n.value,onBlur:b,onChange:h},{default:C(()=>[(r(!0),x(w,null,L(l.value,o=>(r(),v(s,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])}}});export{R as _};
