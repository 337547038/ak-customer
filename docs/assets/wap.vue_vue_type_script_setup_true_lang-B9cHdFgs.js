import{m as S}from"./menuList-DHf8S1Eg.js";import{d as z,E as t,e as d,g as a,r as n,o as _,h as o,n as K,i as T,f as $,t as q,x as A,J as v}from"./index-CkpV00AO.js";const H=z({__name:"wap",setup(I){const l=t(),u=t(),r=t(!0),h=t([{prop:"name",label:"角色名称"},{prop:"status",label:"状态",render:"switch",modelValue:1}]),c=t(""),k=e=>e,C=e=>{e==="add"&&(r.value=!0)},b=e=>{l.value.showForm(!0),v(()=>{u.value.setValue(e),r.value=!1,v(()=>{i.value.setCheckedKeys(e.content?.split(",")||[]),c.value=e.content})})},y=e=>{l.value.deleteById(e)},g=t([{prop:"name",label:"角色名称",rules:[{required:!0,message:"请填写角色名称"}]},{prop:"status",label:"状态",render:"switch",modelValue:1},{prop:"idList",render:"scope"},{prop:"remark",label:"备注"}]),w=e=>(e.content=c.value,e),x=()=>{m(!1),l.value.onRefresh()},m=e=>{l.value.showForm(e)},i=t(),R=()=>{const e=i.value.getCheckedKeys(!1);c.value=e.join(",")};return(e,p)=>{const V=n("van-tag"),f=n("van-button"),B=n("van-cell"),N=n("el-tree"),D=n("van-field"),E=n("w-form"),F=n("w-list");return _(),d(F,{ref_key:"listRef",ref:l,api:{get:"roleList",del:"roleDelete"},before:k,"add-icon-visible":!0,"search-form-data":h.value,"form-title":r.value?"新增角色":"编辑角色",onNavBarEvent:C},{item:a(({data:s})=>[o(B,null,{title:a(()=>[T("span",null,q(s.name),1),s.status===0?(_(),d(V,{key:0,type:"danger"},{default:a(()=>[...p[0]||(p[0]=[A(" 禁用 ",-1)])]),_:1})):$("",!0)]),"right-icon":a(()=>[o(f,{icon:"records-o",type:"primary",size:"small",onClick:L=>b(s)},null,8,["onClick"]),o(f,{style:{"margin-left":"5px"},icon:"delete-o",type:"danger",size:"small",onClick:L=>y(s.id)},null,8,["onClick"])]),_:2},1024)]),default:a(()=>[o(E,{ref_key:"formRef",ref:u,data:g.value,"submit-url":r.value?"roleSave":"roleEdit",before:w,after:x,onCancel:m},{idList:a(()=>[o(D,{label:"菜单权限"},{input:a(()=>[o(N,{ref_key:"treeRef",ref:i,"node-key":"path",props:{label:"title",value:"path"},data:K(S),"show-checkbox":"",onCheckChange:R},null,8,["data"])]),_:1})]),_:1},8,["data","submit-url"])]),_:1},8,["search-form-data","form-title"])}}});export{H as _};
