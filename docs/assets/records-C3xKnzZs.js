import{d as R,E as x,c as l,o as t,L as D,n as _,P as g,f as I,i as S,F as w,b as C,e as p,g as d,x as y,t as N,h as $,r as f,R as B,$ as E,T as F,_ as L,S as T}from"./index-CNiyTwfQ.js";const j={key:0},M={key:1},P={key:2},q={key:3,style:{"padding-top":"15px"}},z=R({__name:"shareInfo",props:{userIds:{},customerId:{},disabled:{type:Boolean}},emits:["update:userIds","change"],setup(i,{expose:b,emit:r}){const c=i,u=r,s=x([]),o=()=>{c.userIds&&B("userListByIds",{ids:c.userIds}).then(a=>{s.value=a.data})},h=(a,e)=>{s.value.splice(e,1);const n=s.value.map(k=>k.id).join(",");m(n,n?"myShare":"cancelShare")},m=(a,e)=>{B("customerShare",{ids:c.customerId,userId:a,type:e}).then(()=>{g()?E("操作成功"):F.success("操作成功"),u("update:userIds",a),a===""&&u("change")})};return b({getData:o}),(a,e)=>{const n=f("el-tag"),k=f("el-button");return t(),l("div",{class:D({wap:_(g)()})},[_(g)()?(t(),l("h3",j," 分享详情 ")):I("",!0),i.userIds==="0"?(t(),l("div",M," 当前客户已共享给所有人 ")):s.value?(t(),l("div",P,[e[1]||(e[1]=S("p",{style:{"padding-bottom":"15px"}}," 当前客户已共享给: ",-1)),(t(!0),l(w,null,C(s.value,(v,V)=>(t(),p(n,{key:v.id,closable:!i.disabled,style:{"margin-right":"5px"},onClose:G=>h(v,V)},{default:d(()=>[y(N(v.userName),1)]),_:2},1032,["closable","onClose"]))),128))])):I("",!0),i.disabled?I("",!0):(t(),l("div",q,[$(k,{type:"danger",onClick:e[0]||(e[0]=v=>m("","cancelShare"))},{default:d(()=>[...e[2]||(e[2]=[y(" 取消分享 ",-1)])]),_:1})]))],2)}}}),J=L(z,[["__scopeId","data-v-ec0eae91"]]),A={class:"time-line"},U=R({__name:"records",setup(i,{expose:b}){const r=x([]),c=s=>{r.value=[],u.value=!0,s&&r.value.length===0&&B("customerRecords",{tid:s}).then(o=>{r.value=o.data.list||[]})},u=x(!1);return b({getData:c}),(s,o)=>{const h=f("el-timeline-item"),m=f("el-timeline"),a=f("van-popup");return _(g)()?(t(),p(a,{key:1,show:u.value,"onUpdate:show":o[0]||(o[0]=e=>u.value=e),"destroy-on-close":"",position:"right",teleport:"body",style:{width:"88%",height:"100%"},closeable:""},{default:d(()=>[S("div",A,[o[1]||(o[1]=S("div",{class:"title"}," 操作记录 ",-1)),$(m,null,{default:d(()=>[(t(!0),l(w,null,C(r.value,(e,n)=>(t(),p(h,{key:n,timestamp:e.userName+e.content},{default:d(()=>[y(N(_(T)(e.dataTime)),1)]),_:2},1032,["timestamp"]))),128))]),_:1})])]),_:1},8,["show"])):(t(),p(m,{key:0},{default:d(()=>[(t(!0),l(w,null,C(r.value,(e,n)=>(t(),p(h,{key:n,timestamp:e.userName+e.content},{default:d(()=>[y(N(_(T)(e.dataTime)),1)]),_:2},1032,["timestamp"]))),128))]),_:1}))}}}),K=L(U,[["__scopeId","data-v-9fa70b8c"]]);export{K as R,J as S};
