import{v as d}from"./validate-DSwcNQEl.js";import{d as F,a3 as M,M as L,E as i,l as U,a4 as _,e as v,n as j,P as b,g as A,a5 as B,r as C,o as V,h as I,Q as J}from"./index-CkpV00AO.js";import{C as u,A as c,P as k}from"./areas-c4JLuV3N.js";const z=F({__name:"index",props:M({data:{default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const r=L(m,"modelValue"),f=i(k),y=(a,e)=>{if(a===1)return u.filter(o=>o.provinceCode===e);if(a===2)return c.filter(o=>o.cityCode===e).map(o=>({...o,leaf:a>=2}))},h={label:"name",value:"code",lazy:!0,lazyLoad(a,e){let{level:o,value:t}=a;["11","12","31","50"].includes(t+"")&&(o=o+1,t=t+"01"),["81","82"].includes(t+"")&&(o=o+1),e(y(o,t+""))}},s=i(),n=i(!1),w=()=>{},p=i(""),g=({selectedOptions:a})=>{n.value=!1,s.value=a.map(e=>e.name).join("/"),r.value=a.map(e=>e.code).join(",")},x=({value:a,selectedOptions:e})=>{const o=e.slice(-1)[0];let t=o.level;["11","12","31","50"].includes(a)&&(a=a+"01",t=1),["81","82"].includes(a)&&(t=1),t?t===1&&(o.children=c.filter(l=>l.cityCode===a).map(l=>(l.level=2,l))):o.children=u.filter(l=>l.provinceCode===a).map(l=>(l.level=1,l))},D=U(()=>r.value,()=>{r.value&&b()&&!s.value&&(p.value=r.value.split(",").slice(-1)[0],P())},{immediate:!0}),P=()=>{const a=r.value.split(","),e=[],o=k.find(l=>l.code===a[0]);if(e.push(o?.name),a?.length===3){const l=u.find(T=>T.code===a[1]);e.push(l?.name)}const t=c.find(l=>l.code===a[a.length-1]);e.push(t?.name),s.value=e.join("/")};return _(()=>{D()}),(a,e)=>{const o=C("el-cascader"),t=C("van-cascader");return j(b)()?(V(),v(B,{key:1,modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value=l),"show-picker":n.value,"onUpdate:showPicker":e[4]||(e[4]=l=>n.value=l),item:m.data,onClearClick:w},{default:A(()=>[I(t,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=l=>p.value=l),title:"请选择所在地区","field-names":{text:"name",value:"code",children:"children"},options:f.value,onClose:e[2]||(e[2]=l=>n.value=!1),onFinish:g,onChange:x},null,8,["modelValue","options"])]),_:1},8,["modelValue","show-picker","item"])):(V(),v(o,{key:0,modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l),props:h,options:f.value,placeholder:"请选择区域"},null,8,["modelValue","options"]))}}}),q=[{prop:"company",label:"客户名称",formItem:{rules:[d("required")]}},{prop:"brandName",label:"品牌名称"},{prop:"type",label:"合作类型",render:"select",options:"cooperationType"},{prop:"industry",label:"行业分类",render:"select",options:"industryType"},{prop:"code",label:"社会信用代码"},{prop:"source",label:"客户来源",render:"select",options:"source"},{prop:"tel",label:"公司电话",formItem:{rules:[d("tel")]}},{prop:"web",label:"网站",formItem:{rules:[d("url")]}},{prop:"area",label:"所属区域",render:"component",component:J(z)},{prop:"address",label:"详细地址"},{prop:"creatTime",label:"创建时间",attr:{disabled:!0},visible:"isDetailForm"},{prop:"updateTime",label:"更新时间",attr:{disabled:!0},visible:"isDetailForm"},{prop:"lastTime",label:"最后跟进时间",attr:{disabled:!0},visible:"isDetailForm"},{prop:"nextTime",label:"下次跟进时间",attr:{disabled:!0},visible:"isDetailForm"},{prop:"remark",label:"备注",attr:{type:"textarea",rows:3}},{prop:"files",label:"相关附件",render:"scope"}];export{z as _,q as f};
