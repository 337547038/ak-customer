import{m as E}from"./menuList-vXFEIJd8.js";import{d as L,r as t,e as w,o as B,g as l,a,w as u,v as D,F as S,B as T}from"./index-BiMixNdo.js";const U=L({__name:"role",setup(F){const s=t(),c=t(),f=t([{prop:"name",label:"角色名称"},{prop:"status",label:"状态",render:"tag",replaceValue:"status",custom:{1:"success",0:"danger"},search:{render:"select",options:"status"}},{label:"操作",render:"buttons",width:150,buttons:[{key:"edit",label:"编辑",attr:{text:!0},click:e=>{i(e)}},{label:"删除",key:"del",attr:{text:!0},popConfirm:{confirmButtonType:"danger"}}]}]),i=e=>{n.value=!0,m.value=e.name?`编辑${e.name}角色`:"新增角色",o.value=e||{},T(()=>{s.value.setCheckedKeys(e.content?.split(",")||[])})},k=t(),o=t({}),n=t(!1),m=t("新增角色"),p=()=>{n.value=!1},_=e=>e,b=()=>{p(),c.value.getData()},v=()=>{const e=s.value.getCheckedKeys(!1);o.value.content=e.join(",")},g=t([{prop:"name",label:"角色名称",formItem:{rules:[{required:!0,message:"请输入角色名称",trigger:"blur"}]}},{label:"状态",prop:"status",render:"radio",options:"status",attr:{modelValue:1}},{label:"权限菜单",prop:"idList",render:"scope"},{label:"备注",prop:"remark",attr:{type:"textarea",rows:4}}]);return(e,r)=>{const h=a("ak-list"),y=a("el-tree"),C=a("el-form-item"),x=a("ak-form"),V=a("el-dialog");return B(),w(S,null,[l(h,{ref_key:"tableListEl",ref:c,pk:"id",columns:f.value,api:{list:"roleList",del:"roleDelete"},"control-btn":[{key:"add",click:()=>{i({})}},{key:"del"}]},null,8,["columns","control-btn"]),l(V,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=d=>n.value=d),width:"500",title:m.value,class:"form-dialog"},{default:u(()=>[l(x,{ref_key:"formEl",ref:k,modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=d=>o.value=d),"label-width":"100px",pk:"id",before:_,after:b,data:g.value,api:{add:"roleSave",edit:"roleEdit",detail:"roleGet"},onCancel:p},{idList:u(()=>[l(C,{label:"角色权限"},{default:u(()=>[l(y,{ref_key:"treeRef",ref:s,"node-key":"path",props:{label:"title",value:"path"},data:D(E),"show-checkbox":"",onCheckChange:v},null,8,["data"])]),_:1})]),_:1},8,["modelValue","data"])]),_:1},8,["modelValue","title"])],64)}}});export{U as default};
