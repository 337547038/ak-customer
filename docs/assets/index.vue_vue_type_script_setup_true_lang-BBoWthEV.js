import{_ as f}from"./index.vue_vue_type_script_setup_true_lang-Y6NzzlyQ.js";import{g as y}from"./getCityByCode-DzjNnDGo.js";import{_ as b}from"./detailTabs.vue_vue_type_script_setup_true_lang-CAMFkiZY.js";import{d as _,l,s as g,I as k,c as h,h as n,F as v,o as w,r as x,D as B,E as i,p as C}from"./index-CJ8aW7xe.js";const R=_({__name:"index",props:{invalidPage:{type:Boolean}},setup(c){const p=c,s=l(),a=l(),o=g(()=>C("delCustomer")),u=[{type:"selection",width:30},{label:"序号",type:"index",width:60},{prop:"company",label:"客户名称"},{prop:"industry",label:"行业分类",render:"tag",replaceValue:"industryType",search:{render:"select",options:"industryType"}},{prop:"area",label:"所属区域",search:{render:"component",component:k(f)},formatter:(e,t,r)=>y(r),showOverflowTooltip:!0},{prop:"operation",label:"操作",render:"buttons",search:!1,fixed:"right",buttons:[{key:"detail",label:"详情",icon:"",attr:{text:!0},click:e=>{s.value.openDrawer(!1,e||{},"")}},{key:"del",label:"删除",icon:"",attr:{text:!0},display:()=>o.value}]}],m=[{key:"toMy",label:"转入跟进",type:"primary",click:e=>{const t=e?.map(r=>r.id).join(",");B("customerMove",{ids:t,type:"toFollow"}).then(r=>{i.success(r.message||"转入成功"),a.value.getData()}).catch(r=>{i.success(r.message||"转入失败")})},disabled:e=>!e?.length},{key:"del",display:()=>o.value}],d=(e,t)=>(e==="get"&&(t.status=p.invalidPage?3:2,t.area&&(t.area=t.area.join(","))),t);return(e,t)=>{const r=x("ak-list");return w(),h(v,null,[n(r,{ref_key:"tableListEl",ref:a,pk:"id",columns:u,api:{list:"customerList",del:"customerDel"},controlBtn:m,before:d},null,512),n(b,{ref_key:"detailTableRef",ref:s,disabled:!0},null,512)],64)}}});export{R as _};
