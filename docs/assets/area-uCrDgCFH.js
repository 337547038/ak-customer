import{d as E,l as s,n as M,w as x,a as N,c as B,h,i as R,g as T,x as V,D as C,r as q,o as z,v as O,_ as S}from"./index-BRtqQkpX.js";import{r as $,_ as I,m as J}from"./childUser.vue_vue_type_script_setup_true_lang-jf3W8El5.js";import{a as A}from"./getCityByCode-DzjNnDGo.js";import"./areas-c4JLuV3N.js";const G={style:{position:"relative"}},H={class:"back-btn"},K=E({__name:"area",setup(L){const b=s(!1),p=s(),i=s(!0),l=s(),m=s(),f=s([]),d=s(0),v=s([]),F=s({backgroundColor:"#FFFFFF",tooltip:{trigger:"item"},visualMap:{type:"continuous",show:!0,min:0,max:d,left:"left",top:"bottom",text:["高","低"],calculable:!0,inRange:{color:["#FFFFFF","#0099FF"]}},series:[{name:"用户数",type:"map",map:m,roam:!0,label:{normal:{show:!0},emphasis:{show:!1}},data:f}]}),j=()=>{i.value=!0,r("china",!0)},k=e=>{y(e)},r=(e,t)=>{const a=e||"china";m.value=a,C(`/echarts/map/${a}.json`).then(()=>{}).catch(c=>{$(a,c),t?_(v.value):y()})},w=e=>({北京:"beijing",广东:"guangdong",湖南:"hunan",江苏:"jiangsu",浙江:"zhejiang",云南:"yunnan",西藏:"xizang",新疆:"xinjiang",四川:"sichuan",陕西:"shanxi1",山西:"shanxi",上海:"shanghai",山东:"shandong",青海:"qinghai",宁夏:"ningxia",内蒙古:"neimenggu",辽宁:"liaoning",吉林:"jilin",江西:"jiangxi",湖北:"hubei",河南:"henan",黑龙江:"heilongjiang",河北:"hebei",海南:"hainan",贵州:"guizhou",广西:"guangxi",甘肃:"gansu",福建:"fujian",重庆:"chongqing",天津:"tianjin",安徽:"anhui",台湾:"taiwan",香港:"xianggang",澳门:"aomen"})[e],D=e=>{if(e.componentType==="series"&&e.seriesType==="map"){const t=w(e.name);t&&(i.value=!1,l.value=e.data?.code,r(t,!0))}},_=e=>{i.value||(e=e.filter(n=>n.area?.split(",")?.[0]===l.value));const t=["11","12","31","50","81","82"].includes(l.value),a={};e.forEach(n=>{if(n.area){const o=n.area.split(",");if(o&&(o.length===3||o.length===2)){let g=i.value?o[0]:o[1];a[g]||(a[g]=0),a[g]++}}});const c=[];let u=0;if(Object.keys(a).length>0)for(const n in a){let o=A(n,i.value?"p":t?"a":"c");i.value&&(o=o?.replace("市","")),c.push({name:o?.replace("省",""),value:a[n],code:n}),a[n]>u&&(u=a[n])}f.value=c,d.value=u,p.value.setOption(F.value)},y=e=>{C("analysisCustomer",{userId:e}).then(t=>{v.value=t.data?.list,_(t.data?.list)})};return M(()=>{r()}),(e,t)=>{const a=q("el-button"),c=N("loading");return x((z(),B("div",G,[h(I,{onChange:k}),R("div",H,[x(h(a,{type:"primary",text:"",onClick:j},{default:T(()=>t[0]||(t[0]=[O("返回中国地图")])),_:1,__:[0]},512),[[V,!i.value]])]),h(J,{ref_key:"myEchartsRef",ref:p,onClick:D},null,512)])),[[c,b.value]])}}}),X=S(K,[["__scopeId","data-v-4e84014d"]]);export{X as default};
