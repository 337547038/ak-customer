import{d as V,r,a as O,c as C,o as a,b as P,F as S,e as _,w as q,f as w,g as t,h as e,i as d,t as I,p as F,u as A,j as K,k as R,l as G,m as E,n as f,q as T,s as Q,v as X,x as L,y as Y,z as Z,A as ee,B as te,C as ne,D as oe,E as B,G as ae,K as se,H,I as le,J as re,L as U,M as ue,_ as J,N as ce,O as j,P as ie}from"./index-DuawtOAE.js";import{m as z}from"./menuList-DHf8S1Eg.js";const _e=""+new URL("logo-CPmPqqKk.png",import.meta.url).href,de=V({__name:"menuItem",props:{data:{default:()=>[]}},setup(g){const v=s=>{for(const i in s)if(F(s[i].path))return!0;return!1};return(s,i)=>{const m=r("ak-icon"),n=r("menu-item",!0),p=r("el-sub-menu"),c=r("el-menu-item"),k=O("permission");return a(!0),C(S,null,P(g.data,(o,u)=>(a(),C(S,{key:u},[o.children&&v(o.children)?(a(),_(p,{key:0,index:o.path||o.menuIndex},{title:t(()=>[e(m,{name:o.icon},null,8,["name"]),d("span",null,I(o.title),1)]),default:t(()=>[e(n,{data:o.children},null,8,["data"])]),_:2},1032,["index"])):o.type!=="btn"?q((a(),_(c,{key:1,index:o.path||o.menuIndex},{default:t(()=>[e(m,{name:o.icon},null,8,["name"]),d("span",null,I(o.title),1)]),_:2},1032,["index"])),[[k,o.path]]):w("",!0)],64))),128)}}}),pe=V({__name:"menu",props:{collapse:{type:Boolean}},setup(g){const v=A(),s=K(),i=R(),m=n=>{v.push({path:n})};return G(()=>s.path,()=>{z.forEach(n=>{if(n.path===s.path)i.changeBreadcrumb([{label:n.title}]);else if(n.children)for(const p in n.children){const c=n.children[p];if(c.path===s.path){i.changeBreadcrumb([{label:c.title}]);break}}})}),E(()=>{}),(n,p)=>{const c=r("el-menu");return a(),_(c,{"unique-opened":!0,collapse:g.collapse,"active-text-color":"#ffd04b","background-color":"rgb(48 65 86)","text-color":"#fff","default-openeds":["customer"],onSelect:m},{default:t(()=>[e(de,{data:f(z)},null,8,["data"])]),_:1},8,["collapse"])}}}),me={class:"comm-header-tool"},fe={class:"header-right"},ve={class:"header-avatar",style:{cursor:"pointer"}},ke={class:"name"},be=V({__name:"header",props:{collapse:{type:Boolean}},emits:["click"],setup(g,{emit:v}){const s=A(),i=R(),m=T(()=>i?.breadcrumb),n=v,p=T(()=>i.userInfo),c=u=>{n("click",u)},k=()=>{i.logout(s)},o=()=>{s.push({path:"/system/userCenter"})};return(u,l)=>{const b=r("el-icon"),$=r("el-breadcrumb-item"),h=r("el-breadcrumb"),x=r("el-avatar"),y=r("el-menu-item"),M=r("el-menu"),N=r("el-dropdown");return a(),C(S,null,[e(b,{class:"collapse-icon",onClick:l[0]||(l[0]=D=>c("collapse"))},{default:t(()=>[g.collapse?(a(),_(f(X),{key:1})):(a(),_(f(Q),{key:0}))]),_:1}),e(h,{separator:"/",class:"breadcrumb"},{default:t(()=>[e($,{to:{path:"/"}},{default:t(()=>[...l[3]||(l[3]=[L(" 首页 ",-1)])]),_:1}),(a(!0),C(S,null,P(m.value,(D,W)=>(a(),_($,{key:W,to:{path:D.path}},{default:t(()=>[L(I(D.label),1)]),_:2},1032,["to"]))),128))]),_:1}),d("div",me,[e(b,{title:"刷新页面",onClick:l[1]||(l[1]=D=>c("refresh"))},{default:t(()=>[e(f(Y))]),_:1}),e(b,{title:"全屏"},{default:t(()=>[e(f(Z),{onClick:l[2]||(l[2]=D=>c("fullScreen"))})]),_:1})]),d("div",fe,[e(N,null,{dropdown:t(()=>[e(M,{class:"avatar-menu"},{default:t(()=>[e(y,{index:"user",onClick:o},{default:t(()=>[e(b,null,{default:t(()=>[e(f(te))]),_:1}),l[4]||(l[4]=d("span",{class:"title"},"个人中心",-1))]),_:1}),e(y,{index:"setting",onClick:o},{default:t(()=>[e(b,null,{default:t(()=>[e(f(ne))]),_:1}),l[5]||(l[5]=d("span",{class:"title"},"设置",-1))]),_:1}),e(y,{index:"logout",onClick:k},{default:t(()=>[e(b,null,{default:t(()=>[e(f(oe))]),_:1}),l[6]||(l[6]=d("span",{class:"title"},"退出登录",-1))]),_:1})]),_:1})]),default:t(()=>[d("div",ve,[e(x,{class:"avatar",size:"small",shape:"circle",src:p.value.avatar},null,8,["src"]),d("span",ke,I(p.value.userName),1),e(b,{class:"el-icon--right"},{default:t(()=>[e(f(ee))]),_:1})])]),_:1})])],64)}}}),he={class:"logo"},ye=V({__name:"index",setup(g){const v=R(),s=B(!1),i=B(!1),m=B(!0),n=B([]),p=u=>{u==="collapse"&&(s.value=!s.value),u==="fullScreen"&&(i.value=!i.value),u==="refresh"&&(m.value=!1,re(()=>{m.value=!0}))},c=u=>{n.value=u},k=T(()=>{const u=v?.tabs;if(u){const l=[];return u.forEach(b=>{l.push(b.name)}),l}return[]}),o=()=>{v.updateSystemDict(!1)};return E(()=>{o()}),(u,l)=>{const b=r("el-aside"),$=r("el-header"),h=r("router-view"),x=r("el-main"),y=r("el-container"),M=r("el-icon");return a(),_(y,{class:"common-layout"},{default:t(()=>[i.value?w("",!0):(a(),_(b,{key:0,width:s.value?"64px":"220px",class:"common-sidebar"},{default:t(()=>[d("div",he,[l[1]||(l[1]=d("img",{src:_e},null,-1)),q(d("span",null,"客户管理系统",512),[[ae,!s.value]])]),e(pe,{collapse:s.value,onGetMenuList:c},null,8,["collapse"])]),_:1},8,["width"])),e(y,{class:"common-container"},{default:t(()=>[i.value?w("",!0):(a(),_($,{key:0,class:"common-header"},{default:t(()=>[e(be,{collapse:s.value,onClick:p},null,8,["collapse"])]),_:1})),e(x,{class:"common-main"},{default:t(()=>[m.value?(a(),_(h,{key:0},{default:t(({Component:N})=>[(a(),_(se,{include:k.value},[(a(),_(H(N)))],1032,["include"]))]),_:1})):w("",!0)]),_:1})]),_:1}),i.value?(a(),_(M,{key:1,class:"quit-full",title:"退出全屏",onClick:l[0]||(l[0]=N=>p("fullScreen"))},{default:t(()=>[e(f(le))]),_:1})):w("",!0)]),_:1})}}}),ge={class:"nav-list"},xe={key:0,class:"nav-list-item"},Ce={style:{display:"flex","justify-content":"center","padding-top":"30px"}},we=V({__name:"navPopup",props:{menuList:{}},setup(g,{expose:v}){const s=A(),i=B(!1),m=()=>{i.value=!0},n=k=>{for(const o in k)if(F(k[o].path))return!0;return!1},p=k=>{s.push({path:k}),c()},c=()=>{i.value=!1};return v({open:m}),(k,o)=>{const u=r("van-cell"),l=r("van-button"),b=r("van-popup"),$=O("permission");return a(),_(b,{show:i.value,"onUpdate:show":o[0]||(o[0]=h=>i.value=h),position:"right",style:{width:"88%",height:"100%"}},{default:t(()=>[d("div",ge,[(a(!0),C(S,null,P(g.menuList,(h,x)=>(a(),C("div",{key:x,class:"nav-group"},[h.children&&n(h.children)?(a(),C("div",xe,[d("h3",null,[d("i",{class:U(h.icon)},null,2),L(" "+I(h.title),1)]),(a(!0),C(S,null,P(h.children,y=>(a(),C(S,{key:y.path},[y.type!=="btn"?q((a(),_(u,{key:0,onClick:M=>p(y.path)},{title:t(()=>[d("i",{class:U(y.icon),style:{"margin-right":"2px"}},null,2),d("span",null,I(y.title),1)]),_:2},1032,["onClick"])),[[$,y.path]]):w("",!0)],64))),128))])):w("",!0)]))),128))]),d("div",Ce,[e(l,{size:"small",onClick:c},{default:t(()=>[...o[1]||(o[1]=[L(" 关闭 ",-1)])]),_:1})])]),_:1},8,["show"])}}}),$e=V({__name:"tabbar",props:{modelValue:{default:0},modelModifiers:{}},emits:["update:modelValue"],setup(g){const v=A(),s=ue(g,"modelValue"),i=m=>{let n="";switch(m){case 0:n="/";break;case 1:n="/customer/list";break;case 2:n="/contract/contract";break;case 3:n="/system/userCenter";break}v.push({path:n})};return(m,n)=>{const p=r("van-tabbar-item"),c=r("van-tabbar");return a(),_(c,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=k=>s.value=k),placeholder:!0,onChange:i},{default:t(()=>[e(p,{icon:"home"},{default:t(()=>[...n[1]||(n[1]=[L(" 首页 ",-1)])]),_:1}),e(p,{icon:"customer"},{default:t(()=>[...n[2]||(n[2]=[L(" 客户管理 ",-1)])]),_:1}),e(p,{icon:"contract"},{default:t(()=>[...n[3]||(n[3]=[L(" 合同管理 ",-1)])]),_:1}),e(p,{icon:"user"},{default:t(()=>[...n[4]||(n[4]=[L(" 我的 ",-1)])]),_:1})]),_:1},8,["modelValue"])}}}),Le=J($e,[["__scopeId","data-v-2f7c313f"]]),Se={class:"layout-container"},Ve={class:"icon-group"},Be=V({__name:"index",setup(g){const v=K(),s=R(),i=()=>{j.emit("nav-bar-left-arrow-event",{})},m=o=>{j.emit(`nav-bar-right-${o}-event`,{})},n=B(),p=()=>{n.value.open()},c=B();G(()=>v.path,o=>{c.value=-1,o==="/"&&(c.value=0),o.indexOf("/customer")===0&&(c.value=1),o.indexOf("/contract")===0&&(c.value=2),o.indexOf("/system")===0&&(c.value=3),z.forEach(u=>{if(u.children?.length){for(const l of u.children)if(l.path===o){s.setNavBarTitle(l.title);break}}})},{immediate:!0});const k=()=>{s.updateSystemDict(!1)};return E(()=>{k(),document.body.classList.add("w-body")}),ce(()=>{document.body.classList.remove("w-body")}),(o,u)=>{const l=r("van-icon"),b=r("van-nav-bar"),$=r("router-view"),h=r("van-back-top");return a(),C(S,null,[d("div",Se,[e(b,{fixed:"",placeholder:"","safe-area-inset-top":"",title:f(s).navBarTitle,"left-arrow":f(s).leftArrow,onClickLeft:i},{right:t(()=>[d("div",Ve,[f(s).rightSearchArrow?(a(),_(l,{key:0,name:"search",size:"26",onClick:u[0]||(u[0]=x=>m("search"))})):w("",!0),f(s).rightAddArrow?(a(),_(l,{key:1,name:"add-o",size:"26",onClick:u[1]||(u[1]=x=>m("add"))})):w("",!0),e(l,{name:"wap-nav",size:"28",onClick:p})])]),_:1},8,["title","left-arrow"]),e($,null,{default:t(({Component:x})=>[(a(),_(H(x)))]),_:1}),e(we,{ref_key:"navPopupRef",ref:n,"menu-list":f(z)},null,8,["menu-list"]),e(Le,{modelValue:c.value,"onUpdate:modelValue":u[2]||(u[2]=x=>c.value=x)},null,8,["modelValue"])]),f(s).backTop?(a(),_(h,{key:0})):w("",!0)],64)}}}),Ie=J(Be,[["__scopeId","data-v-15591082"]]),Ne=V({__name:"enter",setup(g){return(v,s)=>f(ie)()?(a(),_(Ie,{key:1})):(a(),_(ye,{key:0}))}});export{Ne as default};
