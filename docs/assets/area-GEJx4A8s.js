import{d as E,r as s,s as M,k as C,i as N,o as B,e as R,g as h,b as T,w as V,h as q,a as z,A as O,D as x,_ as S}from"./index-BsPutIDd.js";import{_ as $,m as A,r as I}from"./childUser.vue_vue_type_script_setup_true_lang-DG3L7j33.js";import{a as J}from"./getCityByCode-DzjNnDGo.js";import"./areas-c4JLuV3N.js";const G={style:{position:"relative"}},H={class:"back-btn"},K=E({__name:"area",setup(L){const b=s(!1),p=s(),i=s(!0),r=s(),m=s(),f=s([]),d=s(0),v=s([]),F=s({backgroundColor:"#FFFFFF",tooltip:{trigger:"item"},visualMap:{type:"continuous",show:!0,min:0,max:d,left:"left",top:"bottom",text:["高","低"],calculable:!0,inRange:{color:["#FFFFFF","#0099FF"]}},series:[{name:"用户数",type:"map",map:m,roam:!0,label:{normal:{show:!0},emphasis:{show:!1}},data:f}]}),k=()=>{i.value=!0,l("china",!0)},j=e=>{y(e)},l=(e,t)=>{const a=e||"china";m.value=a,x(`echarts/map/${a}.json`).then(()=>{}).catch(c=>{I(a,c),t?_(v.value):y()})},w=e=>({北京:"beijing",广东:"guangdong",湖南:"hunan",江苏:"jiangsu",浙江:"zhejiang",云南:"yunnan",西藏:"xizang",新疆:"xinjiang",四川:"sichuan",陕西:"shanxi1",山西:"shanxi",上海:"shanghai",山东:"shandong",青海:"qinghai",宁夏:"ningxia",内蒙古:"neimenggu",辽宁:"liaoning",吉林:"jilin",江西:"jiangxi",湖北:"hubei",河南:"henan",黑龙江:"heilongjiang",河北:"hebei",海南:"hainan",贵州:"guizhou",广西:"guangxi",甘肃:"gansu",福建:"fujian",重庆:"chongqing",天津:"tianjin",安徽:"anhui",台湾:"taiwan",香港:"xianggang",澳门:"aomen"})[e],D=e=>{if(e.componentType==="series"&&e.seriesType==="map"){const t=w(e.name);t&&(i.value=!1,r.value=e.data?.code,l(t,!0))}},_=e=>{i.value||(e=e.filter(n=>n.area?.split(",")?.[0]===r.value));const t=["11","12","31","50","81","82"].includes(r.value),a={};e.forEach(n=>{if(n.area){const o=n.area.split(",");if(o&&(o.length===3||o.length===2)){let g=i.value?o[0]:o[1];a[g]||(a[g]=0),a[g]++}}});const c=[];let u=0;if(Object.keys(a).length>0)for(const n in a){let o=J(n,i.value?"p":t?"a":"c");i.value&&(o=o?.replace("市","")),c.push({name:o?.replace("省",""),value:a[n],code:n}),a[n]>u&&(u=a[n])}f.value=c,d.value=u,p.value.setOption(F.value)},y=e=>{x("analysisCustomer",{userId:e}).then(t=>{v.value=t.data?.list,_(t.data?.list)})};return M(()=>{l()}),(e,t)=>{const a=z("el-button"),c=N("loading");return C((B(),R("div",G,[h($,{onChange:j}),T("div",H,[C(h(a,{type:"primary",text:"",onClick:k},{default:V(()=>[...t[0]||(t[0]=[q(" 返回中国地图 ",-1)])]),_:1},512),[[O,!i.value]])]),h(A,{ref_key:"myEchartsRef",ref:p,onClick:D},null,512)])),[[c,b.value]])}}}),X=S(K,[["__scopeId","data-v-7ed38705"]]);export{X as default};
