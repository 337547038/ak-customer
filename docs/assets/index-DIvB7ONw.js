import{d as et,A as Ce,s as st,l as W,B as ut,r as V,c as oe,o as Z,i as j,h as z,t as qe,e as tt,g as H,F as rt,v as ae,E as lt,_ as ct,n as ft,C as dt,w as pt,a as ht,b as vt,D as mt,G as Me,H as gt}from"./index-Br-qEitB.js";import{v as te}from"./validate-BQpdx7O0.js";var ue={exports:{}},Ne;function yt(){return Ne||(Ne=1,function(s){var o=function(n){var l=Object.prototype,i=l.hasOwnProperty,f=Object.defineProperty||function(t,e,r){t[e]=r.value},y,E=typeof Symbol=="function"?Symbol:{},M=E.iterator||"@@iterator",N=E.asyncIterator||"@@asyncIterator",q=E.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch{h=function(e,r,u){return e[r]=u}}function v(t,e,r,u){var a=e&&e.prototype instanceof g?e:g,w=Object.create(a.prototype),O=new x(u||[]);return f(w,"_invoke",{value:ie(t,r,O)}),w}n.wrap=v;function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(u){return{type:"throw",arg:u}}}var L="suspendedStart",_="suspendedYield",m="executing",R="completed",k={};function g(){}function b(){}function I(){}var Y={};h(Y,M,function(){return this});var K=Object.getPrototypeOf,F=K&&K(K(ee([])));F&&F!==l&&i.call(F,M)&&(Y=F);var $=I.prototype=g.prototype=Object.create(Y);b.prototype=I,f($,"constructor",{value:I,configurable:!0}),f(I,"constructor",{value:b,configurable:!0}),b.displayName=h(I,q,"GeneratorFunction");function Q(t){["next","throw","return"].forEach(function(e){h(t,e,function(r){return this._invoke(e,r)})})}n.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===b||(e.displayName||e.name)==="GeneratorFunction":!1},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,I):(t.__proto__=I,h(t,q,"GeneratorFunction")),t.prototype=Object.create($),t},n.awrap=function(t){return{__await:t}};function J(t,e){function r(w,O,T,C){var A=p(t[w],t,O);if(A.type==="throw")C(A.arg);else{var c=A.arg,d=c.value;return d&&typeof d=="object"&&i.call(d,"__await")?e.resolve(d.__await).then(function(S){r("next",S,T,C)},function(S){r("throw",S,T,C)}):e.resolve(d).then(function(S){c.value=S,T(c)},function(S){return r("throw",S,T,C)})}}var u;function a(w,O){function T(){return new e(function(C,A){r(w,O,C,A)})}return u=u?u.then(T,T):T()}f(this,"_invoke",{value:a})}Q(J.prototype),h(J.prototype,N,function(){return this}),n.AsyncIterator=J,n.async=function(t,e,r,u,a){a===void 0&&(a=Promise);var w=new J(v(t,e,r,u),a);return n.isGeneratorFunction(e)?w:w.next().then(function(O){return O.done?O.value:w.next()})};function ie(t,e,r){var u=L;return function(w,O){if(u===m)throw new Error("Generator is already running");if(u===R){if(w==="throw")throw O;return ne()}for(r.method=w,r.arg=O;;){var T=r.delegate;if(T){var C=U(T,r);if(C){if(C===k)continue;return C}}if(r.method==="next")r.sent=r._sent=r.arg;else if(r.method==="throw"){if(u===L)throw u=R,r.arg;r.dispatchException(r.arg)}else r.method==="return"&&r.abrupt("return",r.arg);u=m;var A=p(t,e,r);if(A.type==="normal"){if(u=r.done?R:_,A.arg===k)continue;return{value:A.arg,done:r.done}}else A.type==="throw"&&(u=R,r.method="throw",r.arg=A.arg)}}}function U(t,e){var r=e.method,u=t.iterator[r];if(u===y)return e.delegate=null,r==="throw"&&t.iterator.return&&(e.method="return",e.arg=y,U(t,e),e.method==="throw")||r!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),k;var a=p(u,t.iterator,e.arg);if(a.type==="throw")return e.method="throw",e.arg=a.arg,e.delegate=null,k;var w=a.arg;if(!w)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,k;if(w.done)e[t.resultName]=w.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=y);else return w;return e.delegate=null,k}Q($),h($,q,"Generator"),h($,M,function(){return this}),h($,"toString",function(){return"[object Generator]"});function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function X(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}n.keys=function(t){var e=Object(t),r=[];for(var u in e)r.push(u);return r.reverse(),function a(){for(;r.length;){var w=r.pop();if(w in e)return a.value=w,a.done=!1,a}return a.done=!0,a}};function ee(t){if(t){var e=t[M];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var r=-1,u=function a(){for(;++r<t.length;)if(i.call(t,r))return a.value=t[r],a.done=!1,a;return a.value=y,a.done=!0,a};return u.next=u}}return{next:ne}}n.values=ee;function ne(){return{value:y,done:!0}}return x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(X),!t)for(var e in this)e.charAt(0)==="t"&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(C,A){return w.type="throw",w.arg=t,e.next=C,A&&(e.method="next",e.arg=y),!!A}for(var u=this.tryEntries.length-1;u>=0;--u){var a=this.tryEntries[u],w=a.completion;if(a.tryLoc==="root")return r("end");if(a.tryLoc<=this.prev){var O=i.call(a,"catchLoc"),T=i.call(a,"finallyLoc");if(O&&T){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(O){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else if(T){if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var u=this.tryEntries[r];if(u.tryLoc<=this.prev&&i.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var a=u;break}}a&&(t==="break"||t==="continue")&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var w=a?a.completion:{};return w.type=t,w.arg=e,a?(this.method="next",this.next=a.finallyLoc,k):this.complete(w)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),k},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),X(r),k}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var u=r.completion;if(u.type==="throw"){var a=u.arg;X(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:ee(t),resultName:e,nextLoc:r},this.method==="next"&&(this.arg=y),k}},n}(s.exports);try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}(ue)),ue.exports}var le,Ie;function Te(){return Ie||(Ie=1,le=(s,o)=>`${s}-${o}-${Math.random().toString(16).slice(3,8)}`),le}var ce,Pe;function nt(){if(Pe)return ce;Pe=1;const s=Te();let o=0;return ce=({id:n,action:l,payload:i={}})=>{let f=n;return typeof f>"u"&&(f=s("Job",o),o+=1),{id:f,action:l,payload:i}},ce}var re={},Ge;function Ae(){if(Ge)return re;Ge=1;let s=!1;return re.logging=s,re.setLogging=o=>{s=o},re.log=(...o)=>s?console.log.apply(this,o):null,re}var fe,De;function wt(){if(De)return fe;De=1;const s=nt(),{log:o}=Ae(),n=Te();let l=0;return fe=()=>{const i=n("Scheduler",l),f={},y={};let E=[];l+=1;const M=()=>E.length,N=()=>Object.keys(f).length,q=()=>{if(E.length!==0){const _=Object.keys(f);for(let m=0;m<_.length;m+=1)if(typeof y[_[m]]>"u"){E[0](f[_[m]]);break}}},h=(_,m)=>new Promise((R,k)=>{const g=s({action:_,payload:m});E.push(async b=>{E.shift(),y[b.id]=g;try{R(await b[_].apply(this,[...m,g.id]))}catch(I){k(I)}finally{delete y[b.id],q()}}),o(`[${i}]: Add ${g.id} to JobQueue`),o(`[${i}]: JobQueue length=${E.length}`),q()});return{addWorker:_=>(f[_.id]=_,o(`[${i}]: Add ${_.id}`),o(`[${i}]: Number of workers=${N()}`),q(),_.id),addJob:async(_,...m)=>{if(N()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return h(_,m)},terminate:async()=>{Object.keys(f).forEach(async _=>{await f[_].terminate()}),E=[]},getQueueLen:M,getNumWorkers:N}},fe}function _t(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var de,je;function Lt(){return je||(je=1,de=s=>{const o={};return typeof WorkerGlobalScope<"u"?o.type="webworker":typeof document=="object"?o.type="browser":typeof process=="object"&&typeof _t=="function"&&(o.type="node"),typeof s>"u"?o:o[s]}),de}var pe,$e;function St(){if($e)return pe;$e=1;const o=Lt()("type")==="browser"?n=>new URL(n,window.location.href).href:n=>n;return pe=n=>{const l={...n};return["corePath","workerPath","langPath"].forEach(i=>{n[i]&&(l[i]=o(l[i]))}),l},pe}var he,Ue;function ot(){return Ue||(Ue=1,he={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),he}const kt="6.0.1",bt={version:kt};var ve,Be;function Et(){return Be||(Be=1,ve={workerBlobURL:!0,logger:()=>{}}),ve}var me,We;function Rt(){if(We)return me;We=1;const s=bt.version;return me={...Et(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${s}/dist/worker.min.js`},me}var ge,Fe;function Ot(){return Fe||(Fe=1,ge=({workerPath:s,workerBlobURL:o})=>{let n;if(Blob&&URL&&o){const l=new Blob([`importScripts("${s}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(l))}else n=new Worker(s);return n}),ge}var ye,ze;function Tt(){return ze||(ze=1,ye=s=>{s.terminate()}),ye}var we,Ye;function At(){return Ye||(Ye=1,we=(s,o)=>{s.onmessage=({data:n})=>{o(n)}}),we}var _e,Ve;function Ct(){return Ve||(Ve=1,_e=async(s,o)=>{s.postMessage(o)}),_e}var Le,He;function qt(){if(He)return Le;He=1;const s=n=>new Promise((l,i)=>{const f=new FileReader;f.onload=()=>{l(f.result)},f.onerror=({target:{error:{code:y}}})=>{i(Error(`File could not be read! Code=${y}`))},f.readAsArrayBuffer(n)}),o=async n=>{let l=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?l=atob(n.split(",")[1]).split("").map(i=>i.charCodeAt(0)):l=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(l=await o(n.src)),n.tagName==="VIDEO"&&(l=await o(n.poster)),n.tagName==="CANVAS"&&await new Promise(i=>{n.toBlob(async f=>{l=await s(f),i()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const i=await n.convertToBlob();l=await s(i)}else(n instanceof File||n instanceof Blob)&&(l=await s(n));return new Uint8Array(l)};return Le=o,Le}var Se,Ke;function Mt(){if(Ke)return Se;Ke=1;const s=Rt(),o=Ot(),n=Tt(),l=At(),i=Ct(),f=qt();return Se={defaultOptions:s,spawnWorker:o,terminateWorker:n,onMessage:l,send:i,loadImage:f},Se}var ke,Je;function at(){if(Je)return ke;Je=1;const s=St(),o=nt(),{log:n}=Ae(),l=Te(),i=ot(),{defaultOptions:f,spawnWorker:y,terminateWorker:E,onMessage:M,loadImage:N,send:q}=Mt();let h=0;return ke=async(v="eng",p=i.LSTM_ONLY,L={},_={})=>{const m=l("Worker",h),{logger:R,errorHandler:k,...g}=s({...f,...L}),b={},I=typeof v=="string"?v.split("+"):v;let Y=p,K=_;const F=[i.DEFAULT,i.LSTM_ONLY].includes(p)&&!g.legacyCore;let $,Q;const J=new Promise((c,d)=>{Q=c,$=d}),ie=c=>{$(c.message)};let U=y(g);U.onerror=ie,h+=1;const P=({id:c,action:d,payload:S})=>new Promise((G,D)=>{n(`[${m}]: Start ${c}, action=${d}`);const B=`${d}-${c}`;b[B]={resolve:G,reject:D},q(U,{workerId:m,jobId:c,action:d,payload:S})}),X=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),x=c=>P(o({id:c,action:"load",payload:{options:{lstmOnly:F,corePath:g.corePath,logging:g.logging}}})),ee=(c,d,S)=>P(o({id:S,action:"FS",payload:{method:"writeFile",args:[c,d]}})),ne=(c,d)=>P(o({id:d,action:"FS",payload:{method:"readFile",args:[c,{encoding:"utf8"}]}})),t=(c,d)=>P(o({id:d,action:"FS",payload:{method:"unlink",args:[c]}})),e=(c,d,S)=>P(o({id:S,action:"FS",payload:{method:c,args:d}})),r=(c,d)=>P(o({id:d,action:"loadLanguage",payload:{langs:c,options:{langPath:g.langPath,dataPath:g.dataPath,cachePath:g.cachePath,cacheMethod:g.cacheMethod,gzip:g.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(Y)&&!g.legacyLang}}})),u=(c,d,S,G)=>P(o({id:G,action:"initialize",payload:{langs:c,oem:d,config:S}})),a=(c="eng",d,S,G)=>{if(F&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(d))throw Error("Legacy model requested but code missing.");const D=d||Y;Y=D;const B=S||K;K=B;const se=(typeof c=="string"?c.split("+"):c).filter(it=>!I.includes(it));return I.push(...se),se.length>0?r(se,G).then(()=>u(c,D,B,G)):u(c,D,B,G)},w=(c={},d)=>P(o({id:d,action:"setParameters",payload:{params:c}})),O=async(c,d={},S={text:!0},G)=>P(o({id:G,action:"recognize",payload:{image:await N(c),options:d,output:S}})),T=async(c,d)=>{if(F)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return P(o({id:d,action:"detect",payload:{image:await N(c)}}))},C=async()=>(U!==null&&(E(U),U=null),Promise.resolve());M(U,({workerId:c,jobId:d,status:S,action:G,data:D})=>{const B=`${G}-${d}`;if(S==="resolve")n(`[${c}]: Complete ${d}`),b[B].resolve({jobId:d,data:D}),delete b[B];else if(S==="reject")if(b[B].reject(D),delete b[B],G==="load"&&$(D),k)k(D);else throw Error(D);else S==="progress"&&R({...D,userJobId:d})});const A={id:m,worker:U,load:X,writeText:ee,readText:ne,removeFile:t,FS:e,reinitialize:a,setParameters:w,recognize:O,detect:T,terminate:C};return x().then(()=>r(v)).then(()=>u(v,p,_)).then(()=>Q(A)).catch(()=>{}),J},ke}var be,Ze;function Nt(){if(Ze)return be;Ze=1;const s=at();return be={recognize:async(l,i,f)=>{const y=await s(i,1,f);return y.recognize(l).finally(async()=>{await y.terminate()})},detect:async(l,i)=>{const f=await s("osd",0,i);return f.detect(l).finally(async()=>{await f.terminate()})}},be}var Ee,Qe;function It(){return Qe||(Qe=1,Ee={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Ee}var Re,Xe;function Pt(){return Xe||(Xe=1,Re={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Re}var Oe,xe;function Gt(){if(xe)return Oe;xe=1,yt();const s=wt(),o=at(),n=Nt(),l=It(),i=ot(),f=Pt(),{setLogging:y}=Ae();return Oe={languages:l,OEM:i,PSM:f,createScheduler:s,createWorker:o,setLogging:y,...n},Oe}var Dt=Gt();const jt={class:"progress-container"},$t={class:"img-item"},Ut={class:"img-box"},Bt=["src"],Wt={class:"file-name"},Ft={class:"ocr-content"},zt={class:"ocr-text"},Yt={class:"btn"},Vt=et({__name:"card",props:Ce({file:{}},{modelValue:{},modelModifiers:{}}),emits:Ce(["delClick"],["update:modelValue"]),setup(s,{emit:o}){const n=s,l=o,i=st(()=>{const{workerText:p,status:L}=n.file;return p||(L==="success"?"识别中...":"图片上传中..")}),f=W(!1),y=W(!1);ut(s,"modelValue");const E=W(),M=p=>p.status==="success"?"success":p.status==="fail"?"exception":"",N={name:[te("required","联系人姓名不能为空")],company:[te("required","客户名称不能为空")],phone:[te("required","联系人电话不能为空"),te("phone")],email:[te("email")]},q=W([{prop:"name",label:"姓名"},{prop:"company",label:"公司名称"},{prop:"phone",label:"手机号码"},{prop:"position",label:"职务"},{prop:"email",label:"邮箱"}]),h=()=>{y.value=!0,E.value.onSubmit().then(({data:p})=>{y.value=!1,f.value=!0,lt.success(p)}).catch(p=>{y.value=!1})},v=()=>!1;return(p,L)=>{const _=V("el-progress"),m=V("ak-form"),R=V("CircleCheck"),k=V("el-icon"),g=V("el-button");return Z(),oe("div",jt,[j("div",$t,[j("div",Ut,[z(_,{percentage:p.file.percentage||0,status:M(p.file)},null,8,["percentage","status"]),j("img",{src:p.file.url,alt:""},null,8,Bt),j("div",Wt,qe(p.file.name),1)]),j("div",Ft,[L[2]||(L[2]=j("p",null,"识别结果：",-1)),j("p",null,qe(i.value),1)]),j("div",zt,[L[3]||(L[3]=j("p",null,"提取结果",-1)),z(m,{"btn-text":!1,rules:N,"label-width":"90",ref_key:"formRef",ref:E,after:v,api:{add:"customerScanCard"},modelValue:p.file.model,"onUpdate:modelValue":L[0]||(L[0]=b=>p.file.model=b),data:q.value},null,8,["modelValue","data"])]),j("div",Yt,[f.value?(Z(),tt(k,{key:0,size:"26px",color:"green"},{default:H(()=>[z(R)]),_:1})):(Z(),oe(rt,{key:1},[z(g,{type:"danger",onClick:L[1]||(L[1]=b=>l("delClick"))},{default:H(()=>L[4]||(L[4]=[ae("移除")])),_:1,__:[4]}),z(g,{type:"primary",onClick:h,loading:y.value},{default:H(()=>L[5]||(L[5]=[ae("一键入库")])),_:1,__:[5]},8,["loading"])],64))])])])}}}),Ht=ct(Vt,[["__scopeId","data-v-3044ff98"]]),Kt={style:{display:"flex"}},Xt=et({__name:"index",setup(s){const o=W(),n=W([]),l=W(),i=async()=>{l.value=await Dt.createWorker(["eng","chi_sim"],1,{workerPath:"/js/tesseract/worker.min.js",corePath:"/js/tesseract/tesseract-core-simd-lstm.wasm.js"})},f=W(!1),y=h=>{const{file:v,onProgress:p,onSuccess:L,onError:_}=h,m=W();n.value.forEach(g=>{g.uid===v.uid&&(g.status="uploading",m.value=g)});const R=new FormData;R.append("file",v),mt("upload",R,{onUploadProgress:g=>{const b=Math.round(g.loaded*100/g.total);m.value.percentage=b,p({percent:b},v)}}).then(async({data:g})=>{m.value.status="success",m.value.url=g,await E(g,m),L("上传成功",v),Me("fileList",n.value)}).catch(()=>{_("上传失败",v)})},E=async(h,v)=>{const p=await l.value.recognize(h);v.value.workerText=p.data.text,v.value.model=M(p.data.text),await l.value.terminate()},M=h=>{const v=h.match(/姓名[:：]\s*(\S+)/)||h.match(/^([^\d\n]+)\s*[\n\t]/),p=h.match(/职位[:：]\s*(\S+)/)||h.match(/(经理|总监|工程师|设计师)/),L=h.match(/公司[:：]\s*([^\n]+)/),_=h.match(/1[3-9]\d{9}/)||h.match(/\d{3,4}[- ]?\d{7,8}/),m=h.match(/\w+@\w+\.\w+/);return{name:v?v[1].trim():"",position:p?p[1].trim():"",company:L?L[1].trim():"",tel:_?_[0].trim():"",email:m?m[0].trim():""}},N=h=>{n.value.splice(h,1),Me("fileList",n.value)},q=()=>{n.value=[],gt("fileList"),o.value.clearFiles()};return ft(()=>{i(),n.value=dt("fileList")||[]}),(h,v)=>{const p=V("el-button"),L=V("el-upload"),_=ht("loading");return pt((Z(),oe("div",null,[j("div",Kt,[z(L,{ref_key:"uploadRef",ref:o,"show-file-list":!1,"file-list":n.value,"onUpdate:fileList":v[0]||(v[0]=m=>n.value=m),accept:"image/png, image/jpeg, image/jpg","http-request":y,multiple:""},{tip:H(()=>v[2]||(v[2]=[j("div",{class:"el-upload__tip"}," 支持jpg,png,jpeg图片格式 ",-1)])),default:H(()=>[z(p,{type:"primary",icon:"upload-filled"},{default:H(()=>v[1]||(v[1]=[ae("选择名片")])),_:1,__:[1]})]),_:1},8,["file-list"]),z(p,{type:"danger",onClick:q},{default:H(()=>v[3]||(v[3]=[ae("清空")])),_:1,__:[3]})]),(Z(!0),oe(rt,null,vt(n.value,(m,R)=>(Z(),tt(Ht,{key:R,file:m,onDelClick:k=>N(R)},null,8,["file","onDelClick"]))),128))])),[[_,f.value]])}}});export{Xt as default};
