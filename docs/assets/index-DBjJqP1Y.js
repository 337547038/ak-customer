import{d as F,r as t,a as Q,c as S,o as a,b as K,F as B,e as i,w as P,f as g,g as n,h as e,i as p,t as $,p as W,u as U,j as X,k as N,l as Y,m as j,n as Z,q as E,s as M,v as w,x as ee,K as ne,y as te,z as oe}from"./index-BqO2u9IT.js";import{m as V}from"./menuList-vXFEIJd8.js";const le=""+new URL("logo-CPmPqqKk.png",import.meta.url).href,se=F({__name:"menuItem",props:{data:{default:()=>[]}},setup(L){const v=l=>{for(const c in l)if(W(l[c].path))return!0;return!1};return(l,c)=>{const d=t("ak-icon"),r=t("menu-item",!0),m=t("el-sub-menu"),_=t("el-menu-item"),h=Q("permission");return a(!0),S(B,null,K(l.data,(s,u)=>(a(),S(B,{key:u},[s.children&&v(s.children)?(a(),i(m,{key:0,index:s.path||s.menuIndex},{title:n(()=>[e(d,{name:s.icon},null,8,["name"]),p("span",null,$(s.title),1)]),default:n(()=>[e(r,{data:s.children},null,8,["data"])]),_:2},1032,["index"])):s.type!=="btn"?P((a(),i(_,{key:1,index:s.path||s.menuIndex},{default:n(()=>[e(d,{name:s.icon},null,8,["name"]),p("span",null,$(s.title),1)]),_:2},1032,["index"])),[[h,s.path]]):g("",!0)],64))),128)}}}),ae=F({__name:"menu",props:{collapse:{type:Boolean}},setup(L){const v=U(),l=X(),c=N(),d=r=>{v.push({path:r})};return Y(()=>l.path,()=>{V.forEach(r=>{if(r.path===l.path)c.changeBreadcrumb([{label:r.title}]);else if(r.children)for(const m in r.children){const _=r.children[m];if(_.path===l.path){c.changeBreadcrumb([{label:_.title}]);break}}})}),j(()=>{}),(r,m)=>{const _=t("el-menu");return a(),i(_,{"unique-opened":!0,collapse:r.collapse,"active-text-color":"#ffd04b","background-color":"rgb(48 65 86)","text-color":"#fff","default-openeds":["customer"],onSelect:d},{default:n(()=>[e(se,{data:Z(V)},null,8,["data"])]),_:1},8,["collapse"])}}}),ce={class:"comm-header-tool"},re={class:"header-right"},ue={class:"header-avatar",style:{cursor:"pointer"}},ie={class:"name"},_e=F({__name:"header",props:{collapse:{type:Boolean}},emits:["click"],setup(L,{emit:v}){const l=U(),c=N(),d=E(()=>c?.breadcrumb),r=v,m=E(()=>c.userInfo),_=u=>{r("click",u)},h=()=>{c.logout(l)},s=()=>{l.push({path:"/system/userCenter"})};return(u,o)=>{const k=t("Fold"),R=t("Expand"),f=t("el-icon"),C=t("el-breadcrumb-item"),x=t("el-breadcrumb"),D=t("RefreshRight"),I=t("FullScreen"),y=t("el-avatar"),z=t("arrow-down"),A=t("User"),q=t("el-menu-item"),T=t("Setting"),G=t("CircleClose"),H=t("el-menu"),J=t("el-dropdown");return a(),S(B,null,[e(f,{class:"collapse-icon",onClick:o[0]||(o[0]=b=>_("collapse"))},{default:n(()=>[u.collapse?(a(),i(R,{key:1})):(a(),i(k,{key:0}))]),_:1}),e(x,{separator:"/",class:"breadcrumb"},{default:n(()=>[e(C,{to:{path:"/"}},{default:n(()=>[...o[3]||(o[3]=[M(" 首页 ",-1)])]),_:1}),(a(!0),S(B,null,K(d.value,(b,O)=>(a(),i(C,{key:O,to:{path:b.path}},{default:n(()=>[M($(b.label),1)]),_:2},1032,["to"]))),128))]),_:1}),p("div",ce,[e(f,{title:"刷新页面",onClick:o[1]||(o[1]=b=>_("refresh"))},{default:n(()=>[e(D)]),_:1}),e(f,{title:"全屏"},{default:n(()=>[e(I,{onClick:o[2]||(o[2]=b=>_("fullScreen"))})]),_:1})]),p("div",re,[e(J,null,{dropdown:n(()=>[e(H,{class:"avatar-menu"},{default:n(()=>[e(q,{index:"user",onClick:s},{default:n(()=>[e(f,null,{default:n(()=>[e(A)]),_:1}),o[4]||(o[4]=p("span",{class:"title"},"个人中心",-1))]),_:1}),e(q,{index:"setting",onClick:s},{default:n(()=>[e(f,null,{default:n(()=>[e(T)]),_:1}),o[5]||(o[5]=p("span",{class:"title"},"设置",-1))]),_:1}),e(q,{index:"logout",onClick:h},{default:n(()=>[e(f,null,{default:n(()=>[e(G)]),_:1}),o[6]||(o[6]=p("span",{class:"title"},"退出登录",-1))]),_:1})]),_:1})]),default:n(()=>[p("div",ue,[e(y,{class:"avatar",size:"small",shape:"circle",src:m.value.avatar},null,8,["src"]),p("span",ie,$(m.value.userName),1),e(f,{class:"el-icon--right"},{default:n(()=>[e(z)]),_:1})])]),_:1})])],64)}}}),pe={class:"logo"},fe=F({__name:"index",setup(L){const v=N(),l=w(!1),c=w(!1),d=w(!0),r=w([]),m=u=>{u==="collapse"&&(l.value=!l.value),u==="fullScreen"&&(c.value=!c.value),u==="refresh"&&(d.value=!1,oe(()=>{d.value=!0}))},_=u=>{r.value=u},h=E(()=>{const u=v?.tabs;if(u){const o=[];return u.forEach(k=>{o.push(k.name)}),o}return[]}),s=()=>{v.updateSystemDict(!1)};return j(()=>{s()}),(u,o)=>{const k=t("el-aside"),R=t("el-header"),f=t("router-view"),C=t("el-main"),x=t("el-container"),D=t("Close"),I=t("el-icon");return a(),i(x,{class:"common-layout"},{default:n(()=>[c.value?g("",!0):(a(),i(k,{key:0,width:l.value?"64px":"220px",class:"common-sidebar"},{default:n(()=>[p("div",pe,[o[1]||(o[1]=p("img",{src:le},null,-1)),P(p("span",null,"客户管理系统",512),[[ee,!l.value]])]),e(ae,{collapse:l.value,onGetMenuList:_},null,8,["collapse"])]),_:1},8,["width"])),e(x,{class:"common-container"},{default:n(()=>[c.value?g("",!0):(a(),i(R,{key:0,class:"common-header"},{default:n(()=>[e(_e,{collapse:l.value,onClick:m},null,8,["collapse"])]),_:1})),e(C,{class:"common-main"},{default:n(()=>[d.value?(a(),i(f,{key:0},{default:n(({Component:y})=>[(a(),i(ne,{include:h.value},[(a(),i(te(y)))],1032,["include"]))]),_:1})):g("",!0)]),_:1})]),_:1}),c.value?(a(),i(I,{key:1,class:"quit-full",title:"退出全屏",onClick:o[0]||(o[0]=y=>m("fullScreen"))},{default:n(()=>[e(D)]),_:1})):g("",!0)]),_:1})}}});export{fe as default};
