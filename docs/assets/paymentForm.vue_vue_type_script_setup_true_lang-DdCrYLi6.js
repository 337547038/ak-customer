import{v as a}from"./validate-BQpdx7O0.js";import{d as h,l as t,s as C,e as p,g as q,z as M,r as u,o as v,f as P,h as F}from"./index-CJ8aW7xe.js";const H=h({__name:"paymentForm",props:{userId:{}},emits:["callback"],setup(b,{expose:_,emit:k}){const y=b,g=k,r=t(!1),i=t(""),f=C(()=>!y.userId&&l.value.status===1),s=t(),l=t({}),n=t(!1),c=()=>{r.value=!1,l.value={},s.value.resetFields()},x=t([{prop:"code",label:"回款编号",formItem:{rules:[a("required","回款编号不能为空","change")]}},{prop:"contractId",label:"合同",render:"select",formItem:{rules:[a("required","请选择所属合同","change")]},ajax:{api:"contractList",data:{},label:"name",value:"id"},attr:{disabled:n,clearable:!0}},{prop:"money",label:"回款金额",formItem:{rules:[a("required","回款金额不能为空","change"),a("money")]}},{prop:"account",label:"回款账号",render:"select",options:"accountType",formItem:{rules:[a("required","请选择回款账号","change")]}},{prop:"datetime",label:"回款时间",render:"datePicker",attr:{valueFormat:"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD"},formItem:{rules:[a("required","请输入回款时间","change")]}},{prop:"remark",label:"备注",attr:{style:{width:"100%"},type:"textarea",rows:5}}]),I=(o,e)=>{r.value=!0,i.value=o?"修改合同回款":"新增合同回款",o&&e&&M(()=>{s.value.getData({id:e.id})}),n.value=!1,!o&&e&&(l.value.contractId=e.id,n.value=!0)},D=(o,e,d)=>{["add","update"].includes(d)&&(c(),g("callback"))};return _({open:I}),(o,e)=>{const d=u("el-alert"),V=u("ak-form"),Y=u("el-dialog");return v(),p(Y,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=m=>r.value=m),width:"800",title:i.value,class:"form-dialog","before-close":c},{default:q(()=>[f.value?(v(),p(d,{key:0,title:"审核通过，不能修改数据",type:"success"})):P("",!0),F(V,{disabeld:f.value,pk:"id",ref_key:"formRef",ref:s,data:x.value,"label-width":"110",class:"flex-form flex-form-2",after:D,api:{detail:"contractPaymentGet",add:"contractPaymentSave",edit:"contractPaymentEdit"},onCancel:c,modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=m=>l.value=m)},null,8,["disabeld","data","modelValue"])]),_:1},8,["modelValue","title"])}}});export{H as _};
