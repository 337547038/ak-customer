import{d as $,r as t,a as Q,c as S,o as a,b as K,F as B,e as i,w as P,f as C,g as n,h as e,i as _,t as L,p as W,u as U,j as X,k as E,l as k,m as Y,n as j,q as Z,s as q,v as M,x as ee,K as ne,y as te,z as oe}from"./index-CyV0dc7F.js";import{m as V}from"./menuList-vXFEIJd8.js";const le=""+new URL("logo-CPmPqqKk.png",import.meta.url).href,se=$({__name:"menuItem",props:{data:{default:()=>[]}},setup(F){const v=c=>{for(const r in c)if(W(c[r].path))return!0;return!1};return(c,r)=>{const p=t("ak-icon"),h=t("menu-item",!0),s=t("el-sub-menu"),m=t("el-menu-item"),d=Q("permission");return a(!0),S(B,null,K(c.data,(l,u)=>(a(),S(B,{key:u},[l.children&&v(l.children)?(a(),i(s,{key:0,index:l.path||l.menuIndex},{title:n(()=>[e(p,{name:l.icon},null,8,["name"]),_("span",null,L(l.title),1)]),default:n(()=>[e(h,{data:l.children},null,8,["data"])]),_:2},1032,["index"])):l.type!=="btn"?P((a(),i(m,{key:1,index:l.path||l.menuIndex},{default:n(()=>[e(p,{name:l.icon},null,8,["name"]),_("span",null,L(l.title),1)]),_:2},1032,["index"])),[[d,l.path]]):C("",!0)],64))),128)}}}),ae=$({__name:"menu",props:{collapse:{type:Boolean}},emits:["getMenuList"],setup(F,{emit:v}){const c=U(),r=X(),p=E();k("3");const h=s=>{c.push({path:s})};return Y(()=>r.path,()=>{V.forEach(s=>{if(s.path===r.path)p.changeBreadcrumb([{label:s.title}]);else if(s.children)for(const m in s.children){const d=s.children[m];if(d.path===r.path){p.changeBreadcrumb([{label:d.title}]);break}}})}),j(()=>{}),(s,m)=>{const d=t("el-menu");return a(),i(d,{"unique-opened":!0,collapse:s.collapse,"active-text-color":"#ffd04b","background-color":"rgb(48 65 86)","text-color":"#fff",onSelect:h,"default-openeds":["customer"]},{default:n(()=>[e(se,{data:Z(V)},null,8,["data"])]),_:1},8,["collapse"])}}}),ce={class:"comm-header-tool"},re={class:"header-right"},ue={class:"header-avatar",style:{cursor:"pointer"}},ie={class:"name"},_e=$({__name:"header",props:{collapse:{type:Boolean}},emits:["click"],setup(F,{emit:v}){const c=U(),r=E(),p=q(()=>r?.breadcrumb),h=v,s=q(()=>r.userInfo);k({name:"userName",avatar:""});const m=u=>{h("click",u)},d=()=>{r.logout(c)},l=()=>{c.push({path:"/system/userCenter"})};return(u,o)=>{const b=t("Fold"),R=t("Expand"),f=t("el-icon"),x=t("el-breadcrumb-item"),y=t("el-breadcrumb"),D=t("RefreshRight"),I=t("FullScreen"),w=t("el-avatar"),z=t("arrow-down"),A=t("User"),N=t("el-menu-item"),T=t("Setting"),G=t("CircleClose"),H=t("el-menu"),J=t("el-dropdown");return a(),S(B,null,[e(f,{onClick:o[0]||(o[0]=g=>m("collapse")),class:"collapse-icon"},{default:n(()=>[u.collapse?(a(),i(R,{key:1})):(a(),i(b,{key:0}))]),_:1}),e(y,{separator:"/",class:"breadcrumb"},{default:n(()=>[e(x,{to:{path:"/"}},{default:n(()=>[...o[3]||(o[3]=[M("首页",-1)])]),_:1}),(a(!0),S(B,null,K(p.value,(g,O)=>(a(),i(x,{key:O,to:{path:g.path}},{default:n(()=>[M(L(g.label),1)]),_:2},1032,["to"]))),128))]),_:1}),_("div",ce,[e(f,{onClick:o[1]||(o[1]=g=>m("refresh")),title:"刷新页面"},{default:n(()=>[e(D)]),_:1}),e(f,{title:"全屏"},{default:n(()=>[e(I,{onClick:o[2]||(o[2]=g=>m("fullScreen"))})]),_:1})]),_("div",re,[e(J,null,{dropdown:n(()=>[e(H,{class:"avatar-menu"},{default:n(()=>[e(N,{index:"user",onClick:l},{default:n(()=>[e(f,null,{default:n(()=>[e(A)]),_:1}),o[4]||(o[4]=_("span",{class:"title"},"个人中心",-1))]),_:1}),e(N,{index:"setting",onClick:l},{default:n(()=>[e(f,null,{default:n(()=>[e(T)]),_:1}),o[5]||(o[5]=_("span",{class:"title"},"设置",-1))]),_:1}),e(N,{onClick:d,index:"logout"},{default:n(()=>[e(f,null,{default:n(()=>[e(G)]),_:1}),o[6]||(o[6]=_("span",{class:"title"},"退出登录",-1))]),_:1})]),_:1})]),default:n(()=>[_("div",ue,[e(w,{class:"avatar",size:"small",shape:"circle",src:s.value.avatar},null,8,["src"]),_("span",ie,L(s.value.userName),1),e(f,{class:"el-icon--right"},{default:n(()=>[e(z)]),_:1})])]),_:1})])],64)}}}),pe={class:"logo"},fe=$({__name:"index",setup(F){const v=E(),c=k(!1),r=k(!1),p=k(!0),h=k([]),s=u=>{u==="collapse"&&(c.value=!c.value),u==="fullScreen"&&(r.value=!r.value),u==="refresh"&&(p.value=!1,oe(()=>{p.value=!0}))},m=u=>{h.value=u},d=q(()=>{const u=v?.tabs;if(u){const o=[];return u.forEach(b=>{o.push(b.name)}),o}return[]}),l=()=>{v.updateSystemDict(!1)};return j(()=>{l()}),(u,o)=>{const b=t("el-aside"),R=t("el-header"),f=t("router-view"),x=t("el-main"),y=t("el-container"),D=t("Close"),I=t("el-icon");return a(),i(y,{class:"common-layout"},{default:n(()=>[r.value?C("",!0):(a(),i(b,{key:0,width:c.value?"64px":"220px",class:"common-sidebar"},{default:n(()=>[_("div",pe,[o[1]||(o[1]=_("img",{src:le},null,-1)),P(_("span",null,"客户管理系统",512),[[ee,!c.value]])]),e(ae,{collapse:c.value,onGetMenuList:m},null,8,["collapse"])]),_:1},8,["width"])),e(y,{class:"common-container"},{default:n(()=>[r.value?C("",!0):(a(),i(R,{key:0,class:"common-header"},{default:n(()=>[e(_e,{onClick:s,collapse:c.value},null,8,["collapse"])]),_:1})),e(x,{class:"common-main"},{default:n(()=>[p.value?(a(),i(f,{key:0},{default:n(({Component:w})=>[(a(),i(ne,{include:d.value},[(a(),i(te(w)))],1032,["include"]))]),_:1})):C("",!0)]),_:1})]),_:1}),r.value?(a(),i(I,{key:1,class:"quit-full",onClick:o[0]||(o[0]=w=>s("fullScreen")),title:"退出全屏"},{default:n(()=>[e(D)]),_:1})):C("",!0)]),_:1})}}});export{fe as default};
